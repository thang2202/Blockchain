{"ast":null,"code":"var _jsxFileName = \"D:\\\\2\\\\Z_Blockchain\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ethers } from 'ethers';\nimport './App.css';\n\n// Contract addresses (update after deployment)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ART_TOKEN_ADDRESS = process.env.REACT_APP_ART_TOKEN_ADDRESS;\nconst AUCTION_ADDRESS = process.env.REACT_APP_AUCTION_ADDRESS;\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000/api';\n\n// Simple ABI for demonstration (use full ABI from compilation)\nconst ART_TOKEN_ABI = [\"function safeMint(address to) public returns (uint256)\", \"function ownerOf(uint256 tokenId) public view returns (address)\", \"function transferFrom(address from, address to, uint256 tokenId) public\", \"function approve(address to, uint256 tokenId) public\", \"function balanceOf(address owner) public view returns (uint256)\", \"function currentTokenId() public view returns (uint256)\", \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"];\nconst AUCTION_ABI = [\"function createAuction(uint256 _tokenId, uint256 _startPrice, uint256 _durationInMinutes) external\", \"function placeBid(uint256 _auctionId) external payable\", \"function endAuction(uint256 _auctionId) external\", \"function getAuctionDetails(uint256 _auctionId) external view returns (tuple(uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended))\", \"function auctions(uint256) public view returns (uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended)\", \"function getCurrentAuctionId() public view returns (uint256)\", \"event AuctionCreated(uint256 indexed auctionId, uint256 indexed tokenId, address seller, uint256 startPrice, uint256 endTime)\", \"event NewBid(uint256 indexed auctionId, address bidder, uint256 amount)\", \"event AuctionEnded(uint256 indexed auctionId, address winner, uint256 amount)\"];\nfunction App() {\n  _s();\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [account, setAccount] = useState('');\n  const [artTokenContract, setArtTokenContract] = useState(null);\n  const [auctionContract, setAuctionContract] = useState(null);\n  const [nfts, setNfts] = useState([]);\n  const [auctions, setAuctions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [activeTab, setActiveTab] = useState('gallery');\n\n  // Form states\n  const [nftForm, setNftForm] = useState({\n    name: '',\n    description: '',\n    image: null\n  });\n  const [auctionForm, setAuctionForm] = useState({\n    tokenId: '',\n    startPrice: '',\n    duration: ''\n  });\n  const [bidForm, setBidForm] = useState({\n    auctionId: '',\n    amount: ''\n  });\n\n  // Refs Ä‘á»ƒ trÃ¡nh re-render vÃ´ háº¡n\n  const isInitialized = useRef(false);\n  const currentAccountRef = useRef('');\n\n  // HÃ m khá»Ÿi táº¡o contracts\n  const initializeContracts = async web3Signer => {\n    try {\n      console.log('ðŸ”„ Initializing contracts with signer:', await web3Signer.getAddress());\n      const artToken = new ethers.Contract(ART_TOKEN_ADDRESS, ART_TOKEN_ABI, web3Signer);\n      const auction = new ethers.Contract(AUCTION_ADDRESS, AUCTION_ABI, web3Signer);\n      setArtTokenContract(artToken);\n      setAuctionContract(auction);\n      console.log('âœ… Contracts initialized successfully');\n    } catch (error) {\n      console.error('âŒ Error initializing contracts:', error);\n      throw error;\n    }\n  };\n\n  // HÃ m cáº­p nháº­t toÃ n bá»™ state vá»›i account má»›i\n  const updateWalletState = async (newAccount = '') => {\n    try {\n      if (newAccount) {\n        // CÃ³ account má»›i - káº¿t ná»‘i hoáº·c chuyá»ƒn account\n        const web3Provider = new ethers.BrowserProvider(window.ethereum);\n        const newSigner = await web3Provider.getSigner();\n        const actualAccount = await newSigner.getAddress();\n        console.log('ðŸ”„ Updating wallet state to:', actualAccount);\n\n        // Cáº­p nháº­t state\n        setProvider(web3Provider);\n        setSigner(newSigner);\n        setAccount(actualAccount);\n        currentAccountRef.current = actualAccount;\n\n        // Khá»Ÿi táº¡o contracts vá»›i signer má»›i\n        await initializeContracts(newSigner);\n\n        // Fetch láº¡i dá»¯ liá»‡u\n        fetchNFTs();\n        fetchActiveAuctions();\n        console.log('âœ… Wallet state updated successfully');\n        showMessage(`ÄÃ£ chuyá»ƒn sang tÃ i khoáº£n: ${actualAccount.slice(0, 6)}...${actualAccount.slice(-4)}`, 'success');\n      } else {\n        // KhÃ´ng cÃ³ account - ngáº¯t káº¿t ná»‘i\n        console.log('ðŸ‘¤ Disconnecting wallet');\n        setAccount('');\n        currentAccountRef.current = '';\n        setProvider(null);\n        setSigner(null);\n        setArtTokenContract(null);\n        setAuctionContract(null);\n        setNfts([]);\n        setAuctions([]);\n        showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'info');\n      }\n    } catch (error) {\n      console.error('âŒ Error updating wallet state:', error);\n      showMessage('Lá»—i khi cáº­p nháº­t vÃ­: ' + error.message);\n    }\n  };\n\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n accountsChanged - ÄÃƒ Sá»¬A HOÃ€N TOÃ€N\n  const handleAccountsChanged = async accounts => {\n    console.log('ðŸ”„ MetaMask accountsChanged event:', accounts);\n\n    // LuÃ´n cáº­p nháº­t theo accounts tá»« MetaMask\n    if (accounts.length === 0) {\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ disconnect táº¥t cáº£ accounts\n      console.log('ðŸ‘¤ All accounts disconnected');\n      await updateWalletState('');\n    } else {\n      // MetaMask tráº£ vá» danh sÃ¡ch accounts Ä‘Æ°á»£c phÃ©p\n      const newAccount = accounts[0];\n      console.log('ðŸ” New active account:', newAccount);\n      console.log('ðŸ“ Previous account in ref:', currentAccountRef.current);\n\n      // LUÃ”N cáº­p nháº­t, khÃ´ng cáº§n so sÃ¡nh\n      if (newAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\n        console.log('ðŸ”„ Switching to new account');\n        await updateWalletState(newAccount);\n      } else {\n        console.log('âœ… Same account, no change needed');\n      }\n    }\n  };\n\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n chainChanged\n  const handleChainChanged = chainId => {\n    console.log('ðŸ”„ Chain changed:', chainId);\n    showMessage(`ÄÃ£ chuyá»ƒn network: ${chainId}`, 'info');\n    // Reload page khi chain thay Ä‘á»•i Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng\n    setTimeout(() => {\n      window.location.reload();\n    }, 1000);\n  };\n\n  // HÃ m kiá»ƒm tra vÃ  káº¿t ná»‘i vá»›i account hiá»‡n táº¡i cá»§a MetaMask\n  const checkCurrentAccount = async () => {\n    if (!window.ethereum) return;\n    try {\n      const accounts = await window.ethereum.request({\n        method: 'eth_accounts'\n      });\n      console.log('ðŸ” Current MetaMask accounts:', accounts);\n      if (accounts.length > 0) {\n        const currentAccount = accounts[0];\n        console.log('ðŸ“ Found connected account:', currentAccount);\n        if (currentAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\n          console.log('ðŸ”„ Connecting to existing MetaMask account');\n          await updateWalletState(currentAccount);\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Error checking current accounts:', error);\n    }\n  };\n  useEffect(() => {\n    if (account && artTokenContract && auctionContract) {\n      console.log('ðŸ“¡ Fetching data for account:', account);\n      fetchNFTs();\n      fetchActiveAuctions();\n    }\n  }, [account, artTokenContract, auctionContract]);\n  useEffect(() => {\n    // Chá»‰ thiáº¿t láº­p event listeners má»™t láº§n\n    if (isInitialized.current) return;\n    if (window.ethereum) {\n      console.log('ðŸ”§ Setting up MetaMask event listeners...');\n\n      // Kiá»ƒm tra account hiá»‡n táº¡i khi component mount\n      checkCurrentAccount();\n\n      // Thiáº¿t láº­p event listeners\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\n      window.ethereum.on('chainChanged', handleChainChanged);\n      isInitialized.current = true;\n\n      // Cleanup function\n      return () => {\n        console.log('ðŸ§¹ Cleaning up event listeners...');\n        if (window.ethereum) {\n          window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n          window.ethereum.removeListener('chainChanged', handleChainChanged);\n        }\n        isInitialized.current = false;\n      };\n    } else {\n      console.log('âŒ MetaMask not detected');\n    }\n  }, []);\n  const showMessage = (message, type = 'error') => {\n    if (type === 'error') {\n      setError(message);\n      setTimeout(() => setError(''), 5000);\n    } else if (type === 'success') {\n      setSuccess(message);\n      setTimeout(() => setSuccess(''), 5000);\n    } else {\n      setSuccess(message);\n      setTimeout(() => setSuccess(''), 3000);\n    }\n  };\n  const connectWallet = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      if (!window.ethereum) {\n        throw new Error('Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!');\n      }\n      console.log('ðŸ”— Requesting MetaMask connection...');\n\n      // YÃªu cáº§u káº¿t ná»‘i vÃ­ - MetaMask sáº½ hiá»ƒn thá»‹ popup chá»n account\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      console.log('âœ… MetaMask connection approved, accounts:', accounts);\n      if (accounts.length === 0) {\n        throw new Error('KhÃ´ng cÃ³ tÃ i khoáº£n nÃ o Ä‘Æ°á»£c káº¿t ná»‘i');\n      }\n\n      // Sá»± kiá»‡n accountsChanged sáº½ tá»± Ä‘á»™ng xá»­ lÃ½ pháº§n cÃ²n láº¡i\n      const selectedAccount = accounts[0];\n      await updateWalletState(selectedAccount);\n    } catch (error) {\n      console.error('âŒ Lá»—i káº¿t ná»‘i vÃ­:', error);\n      let errorMessage = error.message;\n      if (error.code === 4001) {\n        errorMessage = 'NgÆ°á»i dÃ¹ng Ä‘Ã£ tá»« chá»‘i káº¿t ná»‘i vÃ­';\n      }\n      showMessage(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const disconnectWallet = async () => {\n    try {\n      console.log('ðŸšª User requested disconnect');\n\n      // Trong MetaMask, chÃºng ta khÃ´ng thá»ƒ thá»±c sá»± \"disconnect\" programmatically\n      // NhÆ°ng cÃ³ thá»ƒ reset local state\n      await updateWalletState('');\n    } catch (error) {\n      console.error('âŒ Lá»—i khi ngáº¯t káº¿t ná»‘i:', error);\n      showMessage('Lá»—i khi ngáº¯t káº¿t ná»‘i: ' + error.message);\n    }\n  };\n  const fetchNFTs = async () => {\n    try {\n      console.log('ðŸ“¡ Fetching NFTs for account:', account);\n      const response = await fetch(`${API_BASE}/nfts`);\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch NFTs');\n      const data = await response.json();\n      setNfts(data);\n      console.log(`âœ… Loaded ${data.length} NFTs`);\n    } catch (error) {\n      console.error('âŒ Lá»—i táº£i NFTs:', error);\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch NFTs');\n    }\n  };\n  const fetchActiveAuctions = async () => {\n    try {\n      console.log('ðŸ“¡ Fetching active auctions...');\n      const response = await fetch(`${API_BASE}/active-auctions`);\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch Ä‘áº¥u giÃ¡');\n      const data = await response.json();\n      setAuctions(data);\n      console.log(`âœ… Loaded ${data.length} active auctions`);\n    } catch (error) {\n      console.error('âŒ Lá»—i táº£i Ä‘áº¥u giÃ¡:', error);\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘áº¥u giÃ¡');\n    }\n  };\n  const createNFT = async e => {\n    e.preventDefault();\n    if (!nftForm.name || !nftForm.image) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      console.log('ðŸ”„ Báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº¡o NFT...');\n\n      // Upload artwork to backend\n      const formData = new FormData();\n      formData.append('name', nftForm.name);\n      formData.append('description', nftForm.description || '');\n      formData.append('artist', 'Digital Artist');\n      formData.append('artistAddress', account);\n      formData.append('image', nftForm.image);\n      console.log('ðŸ“¤ Äang upload artwork...');\n      const uploadResponse = await fetch(`${API_BASE}/upload-artwork`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!uploadResponse.ok) {\n        throw new Error(`Upload tháº¥t báº¡i vá»›i status: ${uploadResponse.status}`);\n      }\n      const uploadData = await uploadResponse.json();\n      if (!uploadData.success) {\n        throw new Error(uploadData.error || 'Upload khÃ´ng thÃ nh cÃ´ng');\n      }\n      console.log('âœ… Upload thÃ nh cÃ´ng, Ä‘ang mint NFT...');\n\n      // Mint NFT on blockchain\n      const tx = await artTokenContract.safeMint(account);\n      console.log('â›“ï¸ Transaction sent:', tx.hash);\n      const receipt = await tx.wait();\n      console.log('âœ… Transaction confirmed');\n\n      // Get token ID tá»« event\n      let tokenId = '0';\n      const transferInterface = new ethers.Interface(['event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)']);\n      for (const log of receipt.logs) {\n        try {\n          const parsedLog = transferInterface.parseLog(log);\n          if (parsedLog && parsedLog.name === 'Transfer') {\n            tokenId = parsedLog.args.tokenId.toString();\n            break;\n          }\n        } catch (e) {\n          // Bá» qua log khÃ´ng pháº£i Transfer event\n        }\n      }\n      console.log('ðŸŽ¯ Token ID:', tokenId);\n\n      // Save metadata to backend\n      const saveResponse = await fetch(`${API_BASE}/nft-metadata`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          tokenId,\n          ...uploadData.metadata,\n          imageIpfsHash: uploadData.imageIpfsHash,\n          metadataIpfsHash: uploadData.metadataIpfsHash\n        })\n      });\n      if (!saveResponse.ok) {\n        throw new Error('LÆ°u metadata tháº¥t báº¡i');\n      }\n      console.log('âœ… Metadata saved');\n      showMessage('Táº¡o NFT thÃ nh cÃ´ng!', 'success');\n      setNftForm({\n        name: '',\n        description: '',\n        image: null\n      });\n\n      // Reset file input\n      const fileInput = document.querySelector('input[type=\"file\"]');\n      if (fileInput) fileInput.value = '';\n      fetchNFTs();\n    } catch (error) {\n      console.error('âŒ Lá»—i táº¡o NFT:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const createAuction = async e => {\n    e.preventDefault();\n    if (!auctionForm.tokenId || !auctionForm.startPrice || !auctionForm.duration) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      const tx = await auctionContract.createAuction(auctionForm.tokenId, ethers.parseEther(auctionForm.startPrice), auctionForm.duration);\n      await tx.wait();\n      showMessage('Táº¡o Ä‘áº¥u giÃ¡ thÃ nh cÃ´ng!', 'success');\n      setAuctionForm({\n        tokenId: '',\n        startPrice: '',\n        duration: ''\n      });\n      fetchActiveAuctions();\n    } catch (error) {\n      console.error('Lá»—i táº¡o Ä‘áº¥u giÃ¡:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const placeBid = async e => {\n    e.preventDefault();\n    if (!bidForm.auctionId || !bidForm.amount) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      const tx = await auctionContract.placeBid(bidForm.auctionId, {\n        value: ethers.parseEther(bidForm.amount)\n      });\n      await tx.wait();\n      showMessage('Ra giÃ¡ thÃ nh cÃ´ng!', 'success');\n      setBidForm({\n        auctionId: '',\n        amount: ''\n      });\n      fetchActiveAuctions();\n    } catch (error) {\n      console.error('Lá»—i ra giÃ¡:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatTimeRemaining = endTime => {\n    const now = new Date();\n    const end = new Date(endTime);\n    const diff = end - now;\n    if (diff <= 0) return 'ÄÃ£ káº¿t thÃºc';\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));\n    return `${hours}giá» ${minutes}phÃºt`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDFA8 N\\u1EC1n t\\u1EA3ng \\u0111\\u1EA5u gi\\xE1 ngh\\u1EC7 thu\\u1EADt s\\u1ED1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), !account ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectWallet,\n        disabled: loading,\n        className: \"connect-btn\",\n        children: loading ? 'Äang káº¿t ná»‘i...' : 'Káº¿t ná»‘i MetaMask'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"account-address\",\n            children: [\"T\\xE0i kho\\u1EA3n: \", account.slice(0, 6), \"...\", account.slice(-4)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: disconnectWallet,\n            className: \"disconnect-btn\",\n            title: \"Ng\\u1EAFt k\\u1EBFt n\\u1ED1i\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-hint\",\n          children: \"\\uD83D\\uDCA1 Th\\u1EED \\u0111\\u1ED5i t\\xE0i kho\\u1EA3n trong MetaMask (c\\u1EA3 wallet v\\xE0 imported) \\u0111\\u1EC3 ki\\u1EC3m tra t\\xEDnh n\\u0103ng t\\u1EF1 \\u0111\\u1ED9ng chuy\\u1EC3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 19\n    }, this), account && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'gallery' ? 'active' : '',\n          onClick: () => setActiveTab('gallery'),\n          children: \"Th\\u01B0 vi\\u1EC7n ngh\\u1EC7 thu\\u1EADt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'create' ? 'active' : '',\n          onClick: () => setActiveTab('create'),\n          children: \"T\\u1EA1o NFT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'auctions' ? 'active' : '',\n          onClick: () => setActiveTab('auctions'),\n          children: \"\\u0110\\u1EA5u gi\\xE1 \\u0111ang di\\u1EC5n ra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'bid' ? 'active' : '',\n          onClick: () => setActiveTab('bid'),\n          children: \"Ra gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 11\n      }, this), activeTab === 'create' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"T\\u1EA1o t\\xE1c ph\\u1EA9m m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: createNFT,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"T\\xEAn t\\xE1c ph\\u1EA9m *\",\n            value: nftForm.name,\n            onChange: e => setNftForm({\n              ...nftForm,\n              name: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: \"M\\xF4 t\\u1EA3\",\n            value: nftForm.description,\n            onChange: e => setNftForm({\n              ...nftForm,\n              description: e.target.value\n            }),\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-upload\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u1EA2nh t\\xE1c ph\\u1EA9m *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: e => setNftForm({\n                ...nftForm,\n                image: e.target.files[0]\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang táº¡o NFT...' : 'Táº¡o NFT'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 13\n      }, this), activeTab === 'create' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"T\\u1EA1o \\u0111\\u1EA5u gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: createAuction,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Token ID *\",\n            value: auctionForm.tokenId,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              tokenId: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Gi\\xE1 kh\\u1EDFi \\u0111i\\u1EC3m (ETH) *\",\n            value: auctionForm.startPrice,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              startPrice: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Th\\u1EDDi l\\u01B0\\u1EE3ng (ph\\xFAt) *\",\n            value: auctionForm.duration,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              duration: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang táº¡o Ä‘áº¥u giÃ¡...' : 'Táº¡o Ä‘áº¥u giÃ¡'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 13\n      }, this), activeTab === 'bid' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ra gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: placeBid,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Auction ID *\",\n            value: bidForm.auctionId,\n            onChange: e => setBidForm({\n              ...bidForm,\n              auctionId: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 625,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"S\\u1ED1 ti\\u1EC1n \\u0111\\u1EB7t (ETH) *\",\n            value: bidForm.amount,\n            onChange: e => setBidForm({\n              ...bidForm,\n              amount: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang ra giÃ¡...' : 'Ra giÃ¡'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 13\n      }, this), activeTab === 'gallery' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Th\\u01B0 vi\\u1EC7n ngh\\u1EC7 thu\\u1EADt (\", nfts.length, \" m\\u1EE5c)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 15\n        }, this), nfts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ch\\u01B0a c\\xF3 t\\xE1c ph\\u1EA9m ngh\\u1EC7 thu\\u1EADt n\\xE0o. H\\xE3y t\\u1EA1o NFT \\u0111\\u1EA7u ti\\xEAn c\\u1EE7a b\\u1EA1n!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nft-grid\",\n          children: nfts.map(nft => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nft-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"nft-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: nft.image,\n                alt: nft.name,\n                onError: e => {\n                  e.target.src = 'https://via.placeholder.com/300x300?text=Artwork';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"nft-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: nft.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"description\",\n                children: nft.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"nft-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Token ID: \", nft.tokenId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Ngh\\u1EC7 s\\u0129: \", nft.artist]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Ng\\xE0y t\\u1EA1o: \", new Date(nft.createdAt).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 673,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 23\n            }, this)]\n          }, nft._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 13\n      }, this), activeTab === 'auctions' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u0110\\u1EA5u gi\\xE1 \\u0111ang di\\u1EC5n ra (\", auctions.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 15\n        }, this), auctions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ch\\u01B0a c\\xF3 \\u0111\\u1EA5u gi\\xE1 n\\xE0o \\u0111ang di\\u1EC5n ra. H\\xE3y t\\u1EA1o m\\u1ED9t \\u0111\\u1EA5u gi\\xE1 t\\u1EEB NFT c\\u1EE7a b\\u1EA1n!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctions-grid\",\n          children: auctions.map(auction => {\n            var _auction$bids;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auction-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [\"\\u0110\\u1EA5u gi\\xE1 #\", auction.auctionId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 696,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status ${formatTimeRemaining(auction.endTime) === 'ÄÃ£ káº¿t thÃºc' ? 'ended' : 'active'}`,\n                  children: formatTimeRemaining(auction.endTime)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 697,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 695,\n                columnNumber: 23\n              }, this), auction.nftMetadata && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-nft\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: auction.nftMetadata.image,\n                  alt: auction.nftMetadata.name,\n                  onError: e => {\n                    e.target.src = 'https://via.placeholder.com/200x200?text=Artwork';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 704,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nft-details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: auction.nftMetadata.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 712,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: auction.nftMetadata.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Token ID:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 720,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: auction.tokenId\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 721,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Ng\\u01B0\\u1EDDi b\\xE1n:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"address\",\n                    children: [auction.seller.slice(0, 6), \"...\", auction.seller.slice(-4)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Gi\\xE1 hi\\u1EC7n t\\u1EA1i:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 728,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"bid-amount\",\n                    children: [ethers.formatEther(auction.highestBid || '0'), \" ETH\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 729,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 727,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"S\\u1ED1 l\\u01B0\\u1EE3t ra gi\\xE1:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 734,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: ((_auction$bids = auction.bids) === null || _auction$bids === void 0 ? void 0 : _auction$bids.length) || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 733,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"K\\u1EBFt th\\xFAc:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 738,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: new Date(auction.endTime).toLocaleString('vi-VN')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 739,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 737,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 23\n              }, this), auction.highestBidder && auction.highestBidder !== '0x0000000000000000000000000000000000000000' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-bidder\",\n                children: [\"Ng\\u01B0\\u1EDDi ra gi\\xE1 cao nh\\u1EA5t: \", auction.highestBidder.slice(0, 6), \"...\", auction.highestBidder.slice(-4)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 25\n              }, this)]\n            }, auction._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 758,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 487,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"3S/j3mFg+al2GyGJnvFtT9jIYYw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ethers","jsxDEV","_jsxDEV","ART_TOKEN_ADDRESS","process","env","REACT_APP_ART_TOKEN_ADDRESS","AUCTION_ADDRESS","REACT_APP_AUCTION_ADDRESS","API_BASE","REACT_APP_BACKEND_URL","ART_TOKEN_ABI","AUCTION_ABI","App","_s","provider","setProvider","signer","setSigner","account","setAccount","artTokenContract","setArtTokenContract","auctionContract","setAuctionContract","nfts","setNfts","auctions","setAuctions","loading","setLoading","error","setError","success","setSuccess","activeTab","setActiveTab","nftForm","setNftForm","name","description","image","auctionForm","setAuctionForm","tokenId","startPrice","duration","bidForm","setBidForm","auctionId","amount","isInitialized","currentAccountRef","initializeContracts","web3Signer","console","log","getAddress","artToken","Contract","auction","updateWalletState","newAccount","web3Provider","BrowserProvider","window","ethereum","newSigner","getSigner","actualAccount","current","fetchNFTs","fetchActiveAuctions","showMessage","slice","message","handleAccountsChanged","accounts","length","toLowerCase","handleChainChanged","chainId","setTimeout","location","reload","checkCurrentAccount","request","method","currentAccount","on","removeListener","type","connectWallet","Error","selectedAccount","errorMessage","code","disconnectWallet","response","fetch","ok","data","json","createNFT","e","preventDefault","formData","FormData","append","uploadResponse","body","status","uploadData","tx","safeMint","hash","receipt","wait","transferInterface","Interface","logs","parsedLog","parseLog","args","toString","saveResponse","headers","JSON","stringify","metadata","imageIpfsHash","metadataIpfsHash","fileInput","document","querySelector","value","createAuction","parseEther","placeBid","formatTimeRemaining","endTime","now","Date","end","diff","hours","Math","floor","minutes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","title","onSubmit","placeholder","onChange","target","required","rows","accept","files","map","nft","src","alt","onError","artist","createdAt","toLocaleDateString","_id","_auction$bids","nftMetadata","seller","formatEther","highestBid","bids","toLocaleString","highestBidder","_c","$RefreshReg$"],"sources":["D:/2/Z_Blockchain/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport './App.css';\r\n\r\n// Contract addresses (update after deployment)\r\nconst ART_TOKEN_ADDRESS = process.env.REACT_APP_ART_TOKEN_ADDRESS;\r\nconst AUCTION_ADDRESS = process.env.REACT_APP_AUCTION_ADDRESS;\r\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000/api';\r\n\r\n// Simple ABI for demonstration (use full ABI from compilation)\r\nconst ART_TOKEN_ABI = [\r\n  \"function safeMint(address to) public returns (uint256)\",\r\n  \"function ownerOf(uint256 tokenId) public view returns (address)\",\r\n  \"function transferFrom(address from, address to, uint256 tokenId) public\",\r\n  \"function approve(address to, uint256 tokenId) public\",\r\n  \"function balanceOf(address owner) public view returns (uint256)\",\r\n  \"function currentTokenId() public view returns (uint256)\",\r\n  \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\r\n];\r\n\r\nconst AUCTION_ABI = [\r\n  \"function createAuction(uint256 _tokenId, uint256 _startPrice, uint256 _durationInMinutes) external\",\r\n  \"function placeBid(uint256 _auctionId) external payable\",\r\n  \"function endAuction(uint256 _auctionId) external\",\r\n  \"function getAuctionDetails(uint256 _auctionId) external view returns (tuple(uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended))\",\r\n  \"function auctions(uint256) public view returns (uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended)\",\r\n  \"function getCurrentAuctionId() public view returns (uint256)\",\r\n  \"event AuctionCreated(uint256 indexed auctionId, uint256 indexed tokenId, address seller, uint256 startPrice, uint256 endTime)\",\r\n  \"event NewBid(uint256 indexed auctionId, address bidder, uint256 amount)\",\r\n  \"event AuctionEnded(uint256 indexed auctionId, address winner, uint256 amount)\"\r\n];\r\n\r\nfunction App() {\r\n  const [provider, setProvider] = useState(null);\r\n  const [signer, setSigner] = useState(null);\r\n  const [account, setAccount] = useState('');\r\n  const [artTokenContract, setArtTokenContract] = useState(null);\r\n  const [auctionContract, setAuctionContract] = useState(null);\r\n  const [nfts, setNfts] = useState([]);\r\n  const [auctions, setAuctions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [activeTab, setActiveTab] = useState('gallery');\r\n\r\n  // Form states\r\n  const [nftForm, setNftForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    image: null\r\n  });\r\n  const [auctionForm, setAuctionForm] = useState({\r\n    tokenId: '',\r\n    startPrice: '',\r\n    duration: ''\r\n  });\r\n  const [bidForm, setBidForm] = useState({\r\n    auctionId: '',\r\n    amount: ''\r\n  });\r\n\r\n  // Refs Ä‘á»ƒ trÃ¡nh re-render vÃ´ háº¡n\r\n  const isInitialized = useRef(false);\r\n  const currentAccountRef = useRef('');\r\n\r\n  // HÃ m khá»Ÿi táº¡o contracts\r\n  const initializeContracts = async (web3Signer) => {\r\n    try {\r\n      console.log('ðŸ”„ Initializing contracts with signer:', await web3Signer.getAddress());\r\n      \r\n      const artToken = new ethers.Contract(ART_TOKEN_ADDRESS, ART_TOKEN_ABI, web3Signer);\r\n      const auction = new ethers.Contract(AUCTION_ADDRESS, AUCTION_ABI, web3Signer);\r\n      \r\n      setArtTokenContract(artToken);\r\n      setAuctionContract(auction);\r\n      console.log('âœ… Contracts initialized successfully');\r\n    } catch (error) {\r\n      console.error('âŒ Error initializing contracts:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // HÃ m cáº­p nháº­t toÃ n bá»™ state vá»›i account má»›i\r\n  const updateWalletState = async (newAccount = '') => {\r\n    try {\r\n      if (newAccount) {\r\n        // CÃ³ account má»›i - káº¿t ná»‘i hoáº·c chuyá»ƒn account\r\n        const web3Provider = new ethers.BrowserProvider(window.ethereum);\r\n        const newSigner = await web3Provider.getSigner();\r\n        const actualAccount = await newSigner.getAddress();\r\n        \r\n        console.log('ðŸ”„ Updating wallet state to:', actualAccount);\r\n        \r\n        // Cáº­p nháº­t state\r\n        setProvider(web3Provider);\r\n        setSigner(newSigner);\r\n        setAccount(actualAccount);\r\n        currentAccountRef.current = actualAccount;\r\n        \r\n        // Khá»Ÿi táº¡o contracts vá»›i signer má»›i\r\n        await initializeContracts(newSigner);\r\n        \r\n        // Fetch láº¡i dá»¯ liá»‡u\r\n        fetchNFTs();\r\n        fetchActiveAuctions();\r\n        \r\n        console.log('âœ… Wallet state updated successfully');\r\n        showMessage(`ÄÃ£ chuyá»ƒn sang tÃ i khoáº£n: ${actualAccount.slice(0, 6)}...${actualAccount.slice(-4)}`, 'success');\r\n      } else {\r\n        // KhÃ´ng cÃ³ account - ngáº¯t káº¿t ná»‘i\r\n        console.log('ðŸ‘¤ Disconnecting wallet');\r\n        setAccount('');\r\n        currentAccountRef.current = '';\r\n        setProvider(null);\r\n        setSigner(null);\r\n        setArtTokenContract(null);\r\n        setAuctionContract(null);\r\n        setNfts([]);\r\n        setAuctions([]);\r\n        \r\n        showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'info');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error updating wallet state:', error);\r\n      showMessage('Lá»—i khi cáº­p nháº­t vÃ­: ' + error.message);\r\n    }\r\n  };\r\n\r\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n accountsChanged - ÄÃƒ Sá»¬A HOÃ€N TOÃ€N\r\n  const handleAccountsChanged = async (accounts) => {\r\n    console.log('ðŸ”„ MetaMask accountsChanged event:', accounts);\r\n    \r\n    // LuÃ´n cáº­p nháº­t theo accounts tá»« MetaMask\r\n    if (accounts.length === 0) {\r\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ disconnect táº¥t cáº£ accounts\r\n      console.log('ðŸ‘¤ All accounts disconnected');\r\n      await updateWalletState('');\r\n    } else {\r\n      // MetaMask tráº£ vá» danh sÃ¡ch accounts Ä‘Æ°á»£c phÃ©p\r\n      const newAccount = accounts[0];\r\n      console.log('ðŸ” New active account:', newAccount);\r\n      console.log('ðŸ“ Previous account in ref:', currentAccountRef.current);\r\n      \r\n      // LUÃ”N cáº­p nháº­t, khÃ´ng cáº§n so sÃ¡nh\r\n      if (newAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\r\n        console.log('ðŸ”„ Switching to new account');\r\n        await updateWalletState(newAccount);\r\n      } else {\r\n        console.log('âœ… Same account, no change needed');\r\n      }\r\n    }\r\n  };\r\n\r\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n chainChanged\r\n  const handleChainChanged = (chainId) => {\r\n    console.log('ðŸ”„ Chain changed:', chainId);\r\n    showMessage(`ÄÃ£ chuyá»ƒn network: ${chainId}`, 'info');\r\n    // Reload page khi chain thay Ä‘á»•i Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 1000);\r\n  };\r\n\r\n  // HÃ m kiá»ƒm tra vÃ  káº¿t ná»‘i vá»›i account hiá»‡n táº¡i cá»§a MetaMask\r\n  const checkCurrentAccount = async () => {\r\n    if (!window.ethereum) return;\r\n    \r\n    try {\r\n      const accounts = await window.ethereum.request({ \r\n        method: 'eth_accounts' \r\n      });\r\n      \r\n      console.log('ðŸ” Current MetaMask accounts:', accounts);\r\n      \r\n      if (accounts.length > 0) {\r\n        const currentAccount = accounts[0];\r\n        console.log('ðŸ“ Found connected account:', currentAccount);\r\n        \r\n        if (currentAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\r\n          console.log('ðŸ”„ Connecting to existing MetaMask account');\r\n          await updateWalletState(currentAccount);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error checking current accounts:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (account && artTokenContract && auctionContract) {\r\n      console.log('ðŸ“¡ Fetching data for account:', account);\r\n      fetchNFTs();\r\n      fetchActiveAuctions();\r\n    }\r\n  }, [account, artTokenContract, auctionContract]);\r\n\r\n  useEffect(() => {\r\n    // Chá»‰ thiáº¿t láº­p event listeners má»™t láº§n\r\n    if (isInitialized.current) return;\r\n    \r\n    if (window.ethereum) {\r\n      console.log('ðŸ”§ Setting up MetaMask event listeners...');\r\n      \r\n      // Kiá»ƒm tra account hiá»‡n táº¡i khi component mount\r\n      checkCurrentAccount();\r\n      \r\n      // Thiáº¿t láº­p event listeners\r\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\r\n      window.ethereum.on('chainChanged', handleChainChanged);\r\n      \r\n      isInitialized.current = true;\r\n\r\n      // Cleanup function\r\n      return () => {\r\n        console.log('ðŸ§¹ Cleaning up event listeners...');\r\n        if (window.ethereum) {\r\n          window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\r\n          window.ethereum.removeListener('chainChanged', handleChainChanged);\r\n        }\r\n        isInitialized.current = false;\r\n      };\r\n    } else {\r\n      console.log('âŒ MetaMask not detected');\r\n    }\r\n  }, []);\r\n\r\n  const showMessage = (message, type = 'error') => {\r\n    if (type === 'error') {\r\n      setError(message);\r\n      setTimeout(() => setError(''), 5000);\r\n    } else if (type === 'success') {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(''), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(''), 3000);\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      if (!window.ethereum) {\r\n        throw new Error('Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!');\r\n      }\r\n\r\n      console.log('ðŸ”— Requesting MetaMask connection...');\r\n      \r\n      // YÃªu cáº§u káº¿t ná»‘i vÃ­ - MetaMask sáº½ hiá»ƒn thá»‹ popup chá»n account\r\n      const accounts = await window.ethereum.request({ \r\n        method: 'eth_requestAccounts' \r\n      });\r\n\r\n      console.log('âœ… MetaMask connection approved, accounts:', accounts);\r\n\r\n      if (accounts.length === 0) {\r\n        throw new Error('KhÃ´ng cÃ³ tÃ i khoáº£n nÃ o Ä‘Æ°á»£c káº¿t ná»‘i');\r\n      }\r\n\r\n      // Sá»± kiá»‡n accountsChanged sáº½ tá»± Ä‘á»™ng xá»­ lÃ½ pháº§n cÃ²n láº¡i\r\n      const selectedAccount = accounts[0];\r\n      await updateWalletState(selectedAccount);\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i káº¿t ná»‘i vÃ­:', error);\r\n      \r\n      let errorMessage = error.message;\r\n      if (error.code === 4001) {\r\n        errorMessage = 'NgÆ°á»i dÃ¹ng Ä‘Ã£ tá»« chá»‘i káº¿t ná»‘i vÃ­';\r\n      }\r\n      \r\n      showMessage(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const disconnectWallet = async () => {\r\n    try {\r\n      console.log('ðŸšª User requested disconnect');\r\n      \r\n      // Trong MetaMask, chÃºng ta khÃ´ng thá»ƒ thá»±c sá»± \"disconnect\" programmatically\r\n      // NhÆ°ng cÃ³ thá»ƒ reset local state\r\n      await updateWalletState('');\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i khi ngáº¯t káº¿t ná»‘i:', error);\r\n      showMessage('Lá»—i khi ngáº¯t káº¿t ná»‘i: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const fetchNFTs = async () => {\r\n    try {\r\n      console.log('ðŸ“¡ Fetching NFTs for account:', account);\r\n      const response = await fetch(`${API_BASE}/nfts`);\r\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch NFTs');\r\n      const data = await response.json();\r\n      setNfts(data);\r\n      console.log(`âœ… Loaded ${data.length} NFTs`);\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº£i NFTs:', error);\r\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch NFTs');\r\n    }\r\n  };\r\n\r\n  const fetchActiveAuctions = async () => {\r\n    try {\r\n      console.log('ðŸ“¡ Fetching active auctions...');\r\n      const response = await fetch(`${API_BASE}/active-auctions`);\r\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch Ä‘áº¥u giÃ¡');\r\n      const data = await response.json();\r\n      setAuctions(data);\r\n      console.log(`âœ… Loaded ${data.length} active auctions`);\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº£i Ä‘áº¥u giÃ¡:', error);\r\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘áº¥u giÃ¡');\r\n    }\r\n  };\r\n\r\n  const createNFT = async (e) => {\r\n    e.preventDefault();\r\n    if (!nftForm.name || !nftForm.image) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      console.log('ðŸ”„ Báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº¡o NFT...');\r\n\r\n      // Upload artwork to backend\r\n      const formData = new FormData();\r\n      formData.append('name', nftForm.name);\r\n      formData.append('description', nftForm.description || '');\r\n      formData.append('artist', 'Digital Artist');\r\n      formData.append('artistAddress', account);\r\n      formData.append('image', nftForm.image);\r\n\r\n      console.log('ðŸ“¤ Äang upload artwork...');\r\n      \r\n      const uploadResponse = await fetch(`${API_BASE}/upload-artwork`, {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (!uploadResponse.ok) {\r\n        throw new Error(`Upload tháº¥t báº¡i vá»›i status: ${uploadResponse.status}`);\r\n      }\r\n\r\n      const uploadData = await uploadResponse.json();\r\n      \r\n      if (!uploadData.success) {\r\n        throw new Error(uploadData.error || 'Upload khÃ´ng thÃ nh cÃ´ng');\r\n      }\r\n\r\n      console.log('âœ… Upload thÃ nh cÃ´ng, Ä‘ang mint NFT...');\r\n\r\n      // Mint NFT on blockchain\r\n      const tx = await artTokenContract.safeMint(account);\r\n      console.log('â›“ï¸ Transaction sent:', tx.hash);\r\n      \r\n      const receipt = await tx.wait();\r\n      console.log('âœ… Transaction confirmed');\r\n\r\n      // Get token ID tá»« event\r\n      let tokenId = '0';\r\n      const transferInterface = new ethers.Interface([\r\n        'event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)'\r\n      ]);\r\n      \r\n      for (const log of receipt.logs) {\r\n        try {\r\n          const parsedLog = transferInterface.parseLog(log);\r\n          if (parsedLog && parsedLog.name === 'Transfer') {\r\n            tokenId = parsedLog.args.tokenId.toString();\r\n            break;\r\n          }\r\n        } catch (e) {\r\n          // Bá» qua log khÃ´ng pháº£i Transfer event\r\n        }\r\n      }\r\n\r\n      console.log('ðŸŽ¯ Token ID:', tokenId);\r\n\r\n      // Save metadata to backend\r\n      const saveResponse = await fetch(`${API_BASE}/nft-metadata`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          tokenId,\r\n          ...uploadData.metadata,\r\n          imageIpfsHash: uploadData.imageIpfsHash,\r\n          metadataIpfsHash: uploadData.metadataIpfsHash\r\n        })\r\n      });\r\n\r\n      if (!saveResponse.ok) {\r\n        throw new Error('LÆ°u metadata tháº¥t báº¡i');\r\n      }\r\n\r\n      console.log('âœ… Metadata saved');\r\n\r\n      showMessage('Táº¡o NFT thÃ nh cÃ´ng!', 'success');\r\n      setNftForm({ name: '', description: '', image: null });\r\n      \r\n      // Reset file input\r\n      const fileInput = document.querySelector('input[type=\"file\"]');\r\n      if (fileInput) fileInput.value = '';\r\n      \r\n      fetchNFTs();\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº¡o NFT:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createAuction = async (e) => {\r\n    e.preventDefault();\r\n    if (!auctionForm.tokenId || !auctionForm.startPrice || !auctionForm.duration) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const tx = await auctionContract.createAuction(\r\n        auctionForm.tokenId,\r\n        ethers.parseEther(auctionForm.startPrice),\r\n        auctionForm.duration\r\n      );\r\n      await tx.wait();\r\n      \r\n      showMessage('Táº¡o Ä‘áº¥u giÃ¡ thÃ nh cÃ´ng!', 'success');\r\n      setAuctionForm({ tokenId: '', startPrice: '', duration: '' });\r\n      fetchActiveAuctions();\r\n    } catch (error) {\r\n      console.error('Lá»—i táº¡o Ä‘áº¥u giÃ¡:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const placeBid = async (e) => {\r\n    e.preventDefault();\r\n    if (!bidForm.auctionId || !bidForm.amount) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const tx = await auctionContract.placeBid(bidForm.auctionId, {\r\n        value: ethers.parseEther(bidForm.amount)\r\n      });\r\n      await tx.wait();\r\n      \r\n      showMessage('Ra giÃ¡ thÃ nh cÃ´ng!', 'success');\r\n      setBidForm({ auctionId: '', amount: '' });\r\n      fetchActiveAuctions();\r\n    } catch (error) {\r\n      console.error('Lá»—i ra giÃ¡:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatTimeRemaining = (endTime) => {\r\n    const now = new Date();\r\n    const end = new Date(endTime);\r\n    const diff = end - now;\r\n    \r\n    if (diff <= 0) return 'ÄÃ£ káº¿t thÃºc';\r\n    \r\n    const hours = Math.floor(diff / (1000 * 60 * 60));\r\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n    \r\n    return `${hours}giá» ${minutes}phÃºt`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"app-header\">\r\n        <h1>ðŸŽ¨ Ná»n táº£ng Ä‘áº¥u giÃ¡ nghá»‡ thuáº­t sá»‘</h1>\r\n        {!account ? (\r\n          <button \r\n            onClick={connectWallet} \r\n            disabled={loading}\r\n            className=\"connect-btn\"\r\n          >\r\n            {loading ? 'Äang káº¿t ná»‘i...' : 'Káº¿t ná»‘i MetaMask'}\r\n          </button>\r\n        ) : (\r\n          <div className=\"user-info\">\r\n            <div className=\"account-display\">\r\n              <span className=\"account-address\">\r\n                TÃ i khoáº£n: {account.slice(0, 6)}...{account.slice(-4)}\r\n              </span>\r\n              <button \r\n                onClick={disconnectWallet}\r\n                className=\"disconnect-btn\"\r\n                title=\"Ngáº¯t káº¿t ná»‘i\"\r\n              >\r\n                âœ•\r\n              </button>\r\n            </div>\r\n            <div className=\"account-hint\">\r\n              ðŸ’¡ Thá»­ Ä‘á»•i tÃ i khoáº£n trong MetaMask (cáº£ wallet vÃ  imported) Ä‘á»ƒ kiá»ƒm tra tÃ­nh nÄƒng tá»± Ä‘á»™ng chuyá»ƒn\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* Messages */}\r\n      {error && <div className=\"message error\">{error}</div>}\r\n      {success && <div className=\"message success\">{success}</div>}\r\n\r\n      {account && (\r\n        <div className=\"main-content\">\r\n          {/* Navigation Tabs */}\r\n          <nav className=\"tabs\">\r\n            <button \r\n              className={activeTab === 'gallery' ? 'active' : ''}\r\n              onClick={() => setActiveTab('gallery')}\r\n            >\r\n              ThÆ° viá»‡n nghá»‡ thuáº­t\r\n            </button>\r\n            <button \r\n              className={activeTab === 'create' ? 'active' : ''}\r\n              onClick={() => setActiveTab('create')}\r\n            >\r\n              Táº¡o NFT\r\n            </button>\r\n            <button \r\n              className={activeTab === 'auctions' ? 'active' : ''}\r\n              onClick={() => setActiveTab('auctions')}\r\n            >\r\n              Äáº¥u giÃ¡ Ä‘ang diá»…n ra\r\n            </button>\r\n            <button \r\n              className={activeTab === 'bid' ? 'active' : ''}\r\n              onClick={() => setActiveTab('bid')}\r\n            >\r\n              Ra giÃ¡\r\n            </button>\r\n          </nav>\r\n\r\n          {/* Create NFT Section */}\r\n          {activeTab === 'create' && (\r\n            <section className=\"section\">\r\n              <h2>Táº¡o tÃ¡c pháº©m má»›i</h2>\r\n              <form onSubmit={createNFT} className=\"form\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"TÃªn tÃ¡c pháº©m *\"\r\n                  value={nftForm.name}\r\n                  onChange={(e) => setNftForm({...nftForm, name: e.target.value})}\r\n                  required\r\n                />\r\n                <textarea\r\n                  placeholder=\"MÃ´ táº£\"\r\n                  value={nftForm.description}\r\n                  onChange={(e) => setNftForm({...nftForm, description: e.target.value})}\r\n                  rows=\"3\"\r\n                />\r\n                <div className=\"file-upload\">\r\n                  <label>áº¢nh tÃ¡c pháº©m *</label>\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => setNftForm({...nftForm, image: e.target.files[0]})}\r\n                    required\r\n                  />\r\n                </div>\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang táº¡o NFT...' : 'Táº¡o NFT'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* Create Auction Section */}\r\n          {activeTab === 'create' && (\r\n            <section className=\"section\">\r\n              <h2>Táº¡o Ä‘áº¥u giÃ¡</h2>\r\n              <form onSubmit={createAuction} className=\"form\">\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Token ID *\"\r\n                  value={auctionForm.tokenId}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, tokenId: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"GiÃ¡ khá»Ÿi Ä‘iá»ƒm (ETH) *\"\r\n                  value={auctionForm.startPrice}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, startPrice: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Thá»i lÆ°á»£ng (phÃºt) *\"\r\n                  value={auctionForm.duration}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, duration: e.target.value})}\r\n                  required\r\n                />\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang táº¡o Ä‘áº¥u giÃ¡...' : 'Táº¡o Ä‘áº¥u giÃ¡'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* Place Bid Section */}\r\n          {activeTab === 'bid' && (\r\n            <section className=\"section\">\r\n              <h2>Ra giÃ¡</h2>\r\n              <form onSubmit={placeBid} className=\"form\">\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Auction ID *\"\r\n                  value={bidForm.auctionId}\r\n                  onChange={(e) => setBidForm({...bidForm, auctionId: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Sá»‘ tiá»n Ä‘áº·t (ETH) *\"\r\n                  value={bidForm.amount}\r\n                  onChange={(e) => setBidForm({...bidForm, amount: e.target.value})}\r\n                  required\r\n                />\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang ra giÃ¡...' : 'Ra giÃ¡'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* NFTs Gallery */}\r\n          {activeTab === 'gallery' && (\r\n            <section className=\"section\">\r\n              <h2>ThÆ° viá»‡n nghá»‡ thuáº­t ({nfts.length} má»¥c)</h2>\r\n              {nfts.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <p>ChÆ°a cÃ³ tÃ¡c pháº©m nghá»‡ thuáº­t nÃ o. HÃ£y táº¡o NFT Ä‘áº§u tiÃªn cá»§a báº¡n!</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"nft-grid\">\r\n                  {nfts.map(nft => (\r\n                    <div key={nft._id} className=\"nft-card\">\r\n                      <div className=\"nft-image\">\r\n                        <img \r\n                          src={nft.image} \r\n                          alt={nft.name}\r\n                          onError={(e) => {\r\n                            e.target.src = 'https://via.placeholder.com/300x300?text=Artwork';\r\n                          }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"nft-info\">\r\n                        <h3>{nft.name}</h3>\r\n                        <p className=\"description\">{nft.description}</p>\r\n                        <div className=\"nft-meta\">\r\n                          <small>Token ID: {nft.tokenId}</small>\r\n                          <small>Nghá»‡ sÄ©: {nft.artist}</small>\r\n                          <small>NgÃ y táº¡o: {new Date(nft.createdAt).toLocaleDateString()}</small>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n\r\n          {/* Active Auctions */}\r\n          {activeTab === 'auctions' && (\r\n            <section className=\"section\">\r\n              <h2>Äáº¥u giÃ¡ Ä‘ang diá»…n ra ({auctions.length})</h2>\r\n              {auctions.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <p>ChÆ°a cÃ³ Ä‘áº¥u giÃ¡ nÃ o Ä‘ang diá»…n ra. HÃ£y táº¡o má»™t Ä‘áº¥u giÃ¡ tá»« NFT cá»§a báº¡n!</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"auctions-grid\">\r\n                  {auctions.map(auction => (\r\n                    <div key={auction._id} className=\"auction-card\">\r\n                      <div className=\"auction-header\">\r\n                        <h3>Äáº¥u giÃ¡ #{auction.auctionId}</h3>\r\n                        <span className={`status ${formatTimeRemaining(auction.endTime) === 'ÄÃ£ káº¿t thÃºc' ? 'ended' : 'active'}`}>\r\n                          {formatTimeRemaining(auction.endTime)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {auction.nftMetadata && (\r\n                        <div className=\"auction-nft\">\r\n                          <img \r\n                            src={auction.nftMetadata.image} \r\n                            alt={auction.nftMetadata.name}\r\n                            onError={(e) => {\r\n                              e.target.src = 'https://via.placeholder.com/200x200?text=Artwork';\r\n                            }}\r\n                          />\r\n                          <div className=\"nft-details\">\r\n                            <h4>{auction.nftMetadata.name}</h4>\r\n                            <p>{auction.nftMetadata.description}</p>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"auction-details\">\r\n                        <div className=\"detail-row\">\r\n                          <span>Token ID:</span>\r\n                          <span>{auction.tokenId}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>NgÆ°á»i bÃ¡n:</span>\r\n                          <span className=\"address\">{auction.seller.slice(0, 6)}...{auction.seller.slice(-4)}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>GiÃ¡ hiá»‡n táº¡i:</span>\r\n                          <span className=\"bid-amount\">\r\n                            {ethers.formatEther(auction.highestBid || '0')} ETH\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>Sá»‘ lÆ°á»£t ra giÃ¡:</span>\r\n                          <span>{auction.bids?.length || 0}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>Káº¿t thÃºc:</span>\r\n                          <span>{new Date(auction.endTime).toLocaleString('vi-VN')}</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {auction.highestBidder && auction.highestBidder !== '0x0000000000000000000000000000000000000000' && (\r\n                        <div className=\"current-bidder\">\r\n                          NgÆ°á»i ra giÃ¡ cao nháº¥t: {auction.highestBidder.slice(0, 6)}...{auction.highestBidder.slice(-4)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {loading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"loading-spinner\">Äang táº£i...</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,MAAM,QAAQ,QAAQ;AAC/B,OAAO,WAAW;;AAElB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,iBAAiB,GAAGC,OAAO,CAACC,GAAG,CAACC,2BAA2B;AACjE,MAAMC,eAAe,GAAGH,OAAO,CAACC,GAAG,CAACG,yBAAyB;AAC7D,MAAMC,QAAQ,GAAGL,OAAO,CAACC,GAAG,CAACK,qBAAqB,IAAI,2BAA2B;;AAEjF;AACA,MAAMC,aAAa,GAAG,CACpB,wDAAwD,EACxD,iEAAiE,EACjE,yEAAyE,EACzE,sDAAsD,EACtD,iEAAiE,EACjE,yDAAyD,EACzD,mFAAmF,CACpF;AAED,MAAMC,WAAW,GAAG,CAClB,oGAAoG,EACpG,wDAAwD,EACxD,kDAAkD,EAClD,8NAA8N,EAC9N,iMAAiM,EACjM,8DAA8D,EAC9D,+HAA+H,EAC/H,yEAAyE,EACzE,+EAA+E,CAChF;AAED,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACoB,MAAM,EAAEC,SAAS,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACsB,OAAO,EAAEC,UAAU,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACwB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAAC0B,eAAe,EAAEC,kBAAkB,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAAC4B,IAAI,EAAEC,OAAO,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAAC8B,QAAQ,EAAEC,WAAW,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgC,OAAO,EAAEC,UAAU,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACkC,KAAK,EAAEC,QAAQ,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoC,OAAO,EAAEC,UAAU,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACsC,SAAS,EAAEC,YAAY,CAAC,GAAGvC,QAAQ,CAAC,SAAS,CAAC;;EAErD;EACA,MAAM,CAACwC,OAAO,EAAEC,UAAU,CAAC,GAAGzC,QAAQ,CAAC;IACrC0C,IAAI,EAAE,EAAE;IACRC,WAAW,EAAE,EAAE;IACfC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG9C,QAAQ,CAAC;IAC7C+C,OAAO,EAAE,EAAE;IACXC,UAAU,EAAE,EAAE;IACdC,QAAQ,EAAE;EACZ,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGnD,QAAQ,CAAC;IACrCoD,SAAS,EAAE,EAAE;IACbC,MAAM,EAAE;EACV,CAAC,CAAC;;EAEF;EACA,MAAMC,aAAa,GAAGpD,MAAM,CAAC,KAAK,CAAC;EACnC,MAAMqD,iBAAiB,GAAGrD,MAAM,CAAC,EAAE,CAAC;;EAEpC;EACA,MAAMsD,mBAAmB,GAAG,MAAOC,UAAU,IAAK;IAChD,IAAI;MACFC,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAE,MAAMF,UAAU,CAACG,UAAU,CAAC,CAAC,CAAC;MAEpF,MAAMC,QAAQ,GAAG,IAAI1D,MAAM,CAAC2D,QAAQ,CAACxD,iBAAiB,EAAEQ,aAAa,EAAE2C,UAAU,CAAC;MAClF,MAAMM,OAAO,GAAG,IAAI5D,MAAM,CAAC2D,QAAQ,CAACpD,eAAe,EAAEK,WAAW,EAAE0C,UAAU,CAAC;MAE7EhC,mBAAmB,CAACoC,QAAQ,CAAC;MAC7BlC,kBAAkB,CAACoC,OAAO,CAAC;MAC3BL,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACrD,CAAC,CAAC,OAAOzB,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,MAAMA,KAAK;IACb;EACF,CAAC;;EAED;EACA,MAAM8B,iBAAiB,GAAG,MAAAA,CAAOC,UAAU,GAAG,EAAE,KAAK;IACnD,IAAI;MACF,IAAIA,UAAU,EAAE;QACd;QACA,MAAMC,YAAY,GAAG,IAAI/D,MAAM,CAACgE,eAAe,CAACC,MAAM,CAACC,QAAQ,CAAC;QAChE,MAAMC,SAAS,GAAG,MAAMJ,YAAY,CAACK,SAAS,CAAC,CAAC;QAChD,MAAMC,aAAa,GAAG,MAAMF,SAAS,CAACV,UAAU,CAAC,CAAC;QAElDF,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEa,aAAa,CAAC;;QAE1D;QACArD,WAAW,CAAC+C,YAAY,CAAC;QACzB7C,SAAS,CAACiD,SAAS,CAAC;QACpB/C,UAAU,CAACiD,aAAa,CAAC;QACzBjB,iBAAiB,CAACkB,OAAO,GAAGD,aAAa;;QAEzC;QACA,MAAMhB,mBAAmB,CAACc,SAAS,CAAC;;QAEpC;QACAI,SAAS,CAAC,CAAC;QACXC,mBAAmB,CAAC,CAAC;QAErBjB,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;QAClDiB,WAAW,CAAC,6BAA6BJ,aAAa,CAACK,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,MAAML,aAAa,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,SAAS,CAAC;MAC/G,CAAC,MAAM;QACL;QACAnB,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;QACtCpC,UAAU,CAAC,EAAE,CAAC;QACdgC,iBAAiB,CAACkB,OAAO,GAAG,EAAE;QAC9BtD,WAAW,CAAC,IAAI,CAAC;QACjBE,SAAS,CAAC,IAAI,CAAC;QACfI,mBAAmB,CAAC,IAAI,CAAC;QACzBE,kBAAkB,CAAC,IAAI,CAAC;QACxBE,OAAO,CAAC,EAAE,CAAC;QACXE,WAAW,CAAC,EAAE,CAAC;QAEf6C,WAAW,CAAC,oBAAoB,EAAE,MAAM,CAAC;MAC3C;IACF,CAAC,CAAC,OAAO1C,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD0C,WAAW,CAAC,uBAAuB,GAAG1C,KAAK,CAAC4C,OAAO,CAAC;IACtD;EACF,CAAC;;EAED;EACA,MAAMC,qBAAqB,GAAG,MAAOC,QAAQ,IAAK;IAChDtB,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEqB,QAAQ,CAAC;;IAE3D;IACA,IAAIA,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;MACzB;MACAvB,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC3C,MAAMK,iBAAiB,CAAC,EAAE,CAAC;IAC7B,CAAC,MAAM;MACL;MACA,MAAMC,UAAU,GAAGe,QAAQ,CAAC,CAAC,CAAC;MAC9BtB,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEM,UAAU,CAAC;MACjDP,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEJ,iBAAiB,CAACkB,OAAO,CAAC;;MAErE;MACA,IAAIR,UAAU,CAACiB,WAAW,CAAC,CAAC,KAAK3B,iBAAiB,CAACkB,OAAO,CAACS,WAAW,CAAC,CAAC,EAAE;QACxExB,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;QAC1C,MAAMK,iBAAiB,CAACC,UAAU,CAAC;MACrC,CAAC,MAAM;QACLP,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MACjD;IACF;EACF,CAAC;;EAED;EACA,MAAMwB,kBAAkB,GAAIC,OAAO,IAAK;IACtC1B,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEyB,OAAO,CAAC;IACzCR,WAAW,CAAC,sBAAsBQ,OAAO,EAAE,EAAE,MAAM,CAAC;IACpD;IACAC,UAAU,CAAC,MAAM;MACfjB,MAAM,CAACkB,QAAQ,CAACC,MAAM,CAAC,CAAC;IAC1B,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAACpB,MAAM,CAACC,QAAQ,EAAE;IAEtB,IAAI;MACF,MAAMW,QAAQ,GAAG,MAAMZ,MAAM,CAACC,QAAQ,CAACoB,OAAO,CAAC;QAC7CC,MAAM,EAAE;MACV,CAAC,CAAC;MAEFhC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEqB,QAAQ,CAAC;MAEtD,IAAIA,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;QACvB,MAAMU,cAAc,GAAGX,QAAQ,CAAC,CAAC,CAAC;QAClCtB,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEgC,cAAc,CAAC;QAE1D,IAAIA,cAAc,CAACT,WAAW,CAAC,CAAC,KAAK3B,iBAAiB,CAACkB,OAAO,CAACS,WAAW,CAAC,CAAC,EAAE;UAC5ExB,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC;UACzD,MAAMK,iBAAiB,CAAC2B,cAAc,CAAC;QACzC;MACF;IACF,CAAC,CAAC,OAAOzD,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;IAC5D;EACF,CAAC;EAEDjC,SAAS,CAAC,MAAM;IACd,IAAIqB,OAAO,IAAIE,gBAAgB,IAAIE,eAAe,EAAE;MAClDgC,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAErC,OAAO,CAAC;MACrDoD,SAAS,CAAC,CAAC;MACXC,mBAAmB,CAAC,CAAC;IACvB;EACF,CAAC,EAAE,CAACrD,OAAO,EAAEE,gBAAgB,EAAEE,eAAe,CAAC,CAAC;EAEhDzB,SAAS,CAAC,MAAM;IACd;IACA,IAAIqD,aAAa,CAACmB,OAAO,EAAE;IAE3B,IAAIL,MAAM,CAACC,QAAQ,EAAE;MACnBX,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;;MAExD;MACA6B,mBAAmB,CAAC,CAAC;;MAErB;MACApB,MAAM,CAACC,QAAQ,CAACuB,EAAE,CAAC,iBAAiB,EAAEb,qBAAqB,CAAC;MAC5DX,MAAM,CAACC,QAAQ,CAACuB,EAAE,CAAC,cAAc,EAAET,kBAAkB,CAAC;MAEtD7B,aAAa,CAACmB,OAAO,GAAG,IAAI;;MAE5B;MACA,OAAO,MAAM;QACXf,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;QAChD,IAAIS,MAAM,CAACC,QAAQ,EAAE;UACnBD,MAAM,CAACC,QAAQ,CAACwB,cAAc,CAAC,iBAAiB,EAAEd,qBAAqB,CAAC;UACxEX,MAAM,CAACC,QAAQ,CAACwB,cAAc,CAAC,cAAc,EAAEV,kBAAkB,CAAC;QACpE;QACA7B,aAAa,CAACmB,OAAO,GAAG,KAAK;MAC/B,CAAC;IACH,CAAC,MAAM;MACLf,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACxC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMiB,WAAW,GAAGA,CAACE,OAAO,EAAEgB,IAAI,GAAG,OAAO,KAAK;IAC/C,IAAIA,IAAI,KAAK,OAAO,EAAE;MACpB3D,QAAQ,CAAC2C,OAAO,CAAC;MACjBO,UAAU,CAAC,MAAMlD,QAAQ,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IACtC,CAAC,MAAM,IAAI2D,IAAI,KAAK,SAAS,EAAE;MAC7BzD,UAAU,CAACyC,OAAO,CAAC;MACnBO,UAAU,CAAC,MAAMhD,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IACxC,CAAC,MAAM;MACLA,UAAU,CAACyC,OAAO,CAAC;MACnBO,UAAU,CAAC,MAAMhD,UAAU,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IACxC;EACF,CAAC;EAED,MAAM0D,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC9D,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACF,IAAI,CAACiC,MAAM,CAACC,QAAQ,EAAE;QACpB,MAAM,IAAI2B,KAAK,CAAC,4BAA4B,CAAC;MAC/C;MAEAtC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;;MAEnD;MACA,MAAMqB,QAAQ,GAAG,MAAMZ,MAAM,CAACC,QAAQ,CAACoB,OAAO,CAAC;QAC7CC,MAAM,EAAE;MACV,CAAC,CAAC;MAEFhC,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAEqB,QAAQ,CAAC;MAElE,IAAIA,QAAQ,CAACC,MAAM,KAAK,CAAC,EAAE;QACzB,MAAM,IAAIe,KAAK,CAAC,qCAAqC,CAAC;MACxD;;MAEA;MACA,MAAMC,eAAe,GAAGjB,QAAQ,CAAC,CAAC,CAAC;MACnC,MAAMhB,iBAAiB,CAACiC,eAAe,CAAC;IAE1C,CAAC,CAAC,OAAO/D,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAEzC,IAAIgE,YAAY,GAAGhE,KAAK,CAAC4C,OAAO;MAChC,IAAI5C,KAAK,CAACiE,IAAI,KAAK,IAAI,EAAE;QACvBD,YAAY,GAAG,kCAAkC;MACnD;MAEAtB,WAAW,CAACsB,YAAY,CAAC;IAC3B,CAAC,SAAS;MACRjE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMmE,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI;MACF1C,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;;MAE3C;MACA;MACA,MAAMK,iBAAiB,CAAC,EAAE,CAAC;IAE7B,CAAC,CAAC,OAAO9B,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C0C,WAAW,CAAC,wBAAwB,GAAG1C,KAAK,CAAC4C,OAAO,CAAC;IACvD;EACF,CAAC;EAED,MAAMJ,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACFhB,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAErC,OAAO,CAAC;MACrD,MAAM+E,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG1F,QAAQ,OAAO,CAAC;MAChD,IAAI,CAACyF,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIP,KAAK,CAAC,8BAA8B,CAAC;MACjE,MAAMQ,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;MAClC5E,OAAO,CAAC2E,IAAI,CAAC;MACb9C,OAAO,CAACC,GAAG,CAAC,YAAY6C,IAAI,CAACvB,MAAM,OAAO,CAAC;IAC7C,CAAC,CAAC,OAAO/C,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACvC0C,WAAW,CAAC,8BAA8B,CAAC;IAC7C;EACF,CAAC;EAED,MAAMD,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI;MACFjB,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;MAC7C,MAAM0C,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG1F,QAAQ,kBAAkB,CAAC;MAC3D,IAAI,CAACyF,QAAQ,CAACE,EAAE,EAAE,MAAM,IAAIP,KAAK,CAAC,iCAAiC,CAAC;MACpE,MAAMQ,IAAI,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;MAClC1E,WAAW,CAACyE,IAAI,CAAC;MACjB9C,OAAO,CAACC,GAAG,CAAC,YAAY6C,IAAI,CAACvB,MAAM,kBAAkB,CAAC;IACxD,CAAC,CAAC,OAAO/C,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1C0C,WAAW,CAAC,iCAAiC,CAAC;IAChD;EACF,CAAC;EAED,MAAM8B,SAAS,GAAG,MAAOC,CAAC,IAAK;IAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACpE,OAAO,CAACE,IAAI,IAAI,CAACF,OAAO,CAACI,KAAK,EAAE;MACnCgC,WAAW,CAAC,0CAA0C,CAAC;MACvD;IACF;IAEA3C,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACFyB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;;MAE9C;MACA,MAAMkD,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEvE,OAAO,CAACE,IAAI,CAAC;MACrCmE,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEvE,OAAO,CAACG,WAAW,IAAI,EAAE,CAAC;MACzDkE,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,gBAAgB,CAAC;MAC3CF,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAEzF,OAAO,CAAC;MACzCuF,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEvE,OAAO,CAACI,KAAK,CAAC;MAEvCc,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;MAExC,MAAMqD,cAAc,GAAG,MAAMV,KAAK,CAAC,GAAG1F,QAAQ,iBAAiB,EAAE;QAC/D8E,MAAM,EAAE,MAAM;QACduB,IAAI,EAAEJ;MACR,CAAC,CAAC;MAEF,IAAI,CAACG,cAAc,CAACT,EAAE,EAAE;QACtB,MAAM,IAAIP,KAAK,CAAC,+BAA+BgB,cAAc,CAACE,MAAM,EAAE,CAAC;MACzE;MAEA,MAAMC,UAAU,GAAG,MAAMH,cAAc,CAACP,IAAI,CAAC,CAAC;MAE9C,IAAI,CAACU,UAAU,CAAC/E,OAAO,EAAE;QACvB,MAAM,IAAI4D,KAAK,CAACmB,UAAU,CAACjF,KAAK,IAAI,yBAAyB,CAAC;MAChE;MAEAwB,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;;MAEpD;MACA,MAAMyD,EAAE,GAAG,MAAM5F,gBAAgB,CAAC6F,QAAQ,CAAC/F,OAAO,CAAC;MACnDoC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEyD,EAAE,CAACE,IAAI,CAAC;MAE5C,MAAMC,OAAO,GAAG,MAAMH,EAAE,CAACI,IAAI,CAAC,CAAC;MAC/B9D,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;;MAEtC;MACA,IAAIZ,OAAO,GAAG,GAAG;MACjB,MAAM0E,iBAAiB,GAAG,IAAItH,MAAM,CAACuH,SAAS,CAAC,CAC7C,mFAAmF,CACpF,CAAC;MAEF,KAAK,MAAM/D,GAAG,IAAI4D,OAAO,CAACI,IAAI,EAAE;QAC9B,IAAI;UACF,MAAMC,SAAS,GAAGH,iBAAiB,CAACI,QAAQ,CAAClE,GAAG,CAAC;UACjD,IAAIiE,SAAS,IAAIA,SAAS,CAAClF,IAAI,KAAK,UAAU,EAAE;YAC9CK,OAAO,GAAG6E,SAAS,CAACE,IAAI,CAAC/E,OAAO,CAACgF,QAAQ,CAAC,CAAC;YAC3C;UACF;QACF,CAAC,CAAC,OAAOpB,CAAC,EAAE;UACV;QAAA;MAEJ;MAEAjD,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEZ,OAAO,CAAC;;MAEpC;MACA,MAAMiF,YAAY,GAAG,MAAM1B,KAAK,CAAC,GAAG1F,QAAQ,eAAe,EAAE;QAC3D8E,MAAM,EAAE,MAAM;QACduC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/ChB,IAAI,EAAEiB,IAAI,CAACC,SAAS,CAAC;UACnBpF,OAAO;UACP,GAAGoE,UAAU,CAACiB,QAAQ;UACtBC,aAAa,EAAElB,UAAU,CAACkB,aAAa;UACvCC,gBAAgB,EAAEnB,UAAU,CAACmB;QAC/B,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACN,YAAY,CAACzB,EAAE,EAAE;QACpB,MAAM,IAAIP,KAAK,CAAC,uBAAuB,CAAC;MAC1C;MAEAtC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;MAE/BiB,WAAW,CAAC,qBAAqB,EAAE,SAAS,CAAC;MAC7CnC,UAAU,CAAC;QAAEC,IAAI,EAAE,EAAE;QAAEC,WAAW,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC;;MAEtD;MACA,MAAM2F,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,oBAAoB,CAAC;MAC9D,IAAIF,SAAS,EAAEA,SAAS,CAACG,KAAK,GAAG,EAAE;MAEnChE,SAAS,CAAC,CAAC;IAEb,CAAC,CAAC,OAAOxC,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACtC0C,WAAW,CAAC1C,KAAK,CAAC4C,OAAO,CAAC;IAC5B,CAAC,SAAS;MACR7C,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM0G,aAAa,GAAG,MAAOhC,CAAC,IAAK;IACjCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC/D,WAAW,CAACE,OAAO,IAAI,CAACF,WAAW,CAACG,UAAU,IAAI,CAACH,WAAW,CAACI,QAAQ,EAAE;MAC5E2B,WAAW,CAAC,0CAA0C,CAAC;MACvD;IACF;IAEA3C,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMmF,EAAE,GAAG,MAAM1F,eAAe,CAACiH,aAAa,CAC5C9F,WAAW,CAACE,OAAO,EACnB5C,MAAM,CAACyI,UAAU,CAAC/F,WAAW,CAACG,UAAU,CAAC,EACzCH,WAAW,CAACI,QACd,CAAC;MACD,MAAMmE,EAAE,CAACI,IAAI,CAAC,CAAC;MAEf5C,WAAW,CAAC,yBAAyB,EAAE,SAAS,CAAC;MACjD9B,cAAc,CAAC;QAAEC,OAAO,EAAE,EAAE;QAAEC,UAAU,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAG,CAAC,CAAC;MAC7D0B,mBAAmB,CAAC,CAAC;IACvB,CAAC,CAAC,OAAOzC,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxC0C,WAAW,CAAC1C,KAAK,CAAC4C,OAAO,CAAC;IAC5B,CAAC,SAAS;MACR7C,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM4G,QAAQ,GAAG,MAAOlC,CAAC,IAAK;IAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAAC1D,OAAO,CAACE,SAAS,IAAI,CAACF,OAAO,CAACG,MAAM,EAAE;MACzCuB,WAAW,CAAC,0CAA0C,CAAC;MACvD;IACF;IAEA3C,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMmF,EAAE,GAAG,MAAM1F,eAAe,CAACmH,QAAQ,CAAC3F,OAAO,CAACE,SAAS,EAAE;QAC3DsF,KAAK,EAAEvI,MAAM,CAACyI,UAAU,CAAC1F,OAAO,CAACG,MAAM;MACzC,CAAC,CAAC;MACF,MAAM+D,EAAE,CAACI,IAAI,CAAC,CAAC;MAEf5C,WAAW,CAAC,oBAAoB,EAAE,SAAS,CAAC;MAC5CzB,UAAU,CAAC;QAAEC,SAAS,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAG,CAAC,CAAC;MACzCsB,mBAAmB,CAAC,CAAC;IACvB,CAAC,CAAC,OAAOzC,KAAK,EAAE;MACdwB,OAAO,CAACxB,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;MACnC0C,WAAW,CAAC1C,KAAK,CAAC4C,OAAO,CAAC;IAC5B,CAAC,SAAS;MACR7C,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM6G,mBAAmB,GAAIC,OAAO,IAAK;IACvC,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;IACtB,MAAMC,GAAG,GAAG,IAAID,IAAI,CAACF,OAAO,CAAC;IAC7B,MAAMI,IAAI,GAAGD,GAAG,GAAGF,GAAG;IAEtB,IAAIG,IAAI,IAAI,CAAC,EAAE,OAAO,aAAa;IAEnC,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IACjD,MAAMI,OAAO,GAAGF,IAAI,CAACC,KAAK,CAAEH,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,IAAK,IAAI,GAAG,EAAE,CAAC,CAAC;IAEnE,OAAO,GAAGC,KAAK,OAAOG,OAAO,MAAM;EACrC,CAAC;EAED,oBACElJ,OAAA;IAAKmJ,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBpJ,OAAA;MAAQmJ,SAAS,EAAC,YAAY;MAAAC,QAAA,gBAC5BpJ,OAAA;QAAAoJ,QAAA,EAAI;MAAiC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACzC,CAACvI,OAAO,gBACPjB,OAAA;QACEyJ,OAAO,EAAE/D,aAAc;QACvBgE,QAAQ,EAAE/H,OAAQ;QAClBwH,SAAS,EAAC,aAAa;QAAAC,QAAA,EAEtBzH,OAAO,GAAG,iBAAiB,GAAG;MAAkB;QAAA0H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CAAC,gBAETxJ,OAAA;QAAKmJ,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBpJ,OAAA;UAAKmJ,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC9BpJ,OAAA;YAAMmJ,SAAS,EAAC,iBAAiB;YAAAC,QAAA,GAAC,qBACrB,EAACnI,OAAO,CAACuD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,KAAG,EAACvD,OAAO,CAACuD,KAAK,CAAC,CAAC,CAAC,CAAC;UAAA;YAAA6E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjD,CAAC,eACPxJ,OAAA;YACEyJ,OAAO,EAAE1D,gBAAiB;YAC1BoD,SAAS,EAAC,gBAAgB;YAC1BQ,KAAK,EAAC,6BAAc;YAAAP,QAAA,EACrB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACNxJ,OAAA;UAAKmJ,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAE9B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACK,CAAC,EAGR3H,KAAK,iBAAI7B,OAAA;MAAKmJ,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAEvH;IAAK;MAAAwH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACrDzH,OAAO,iBAAI/B,OAAA;MAAKmJ,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAAErH;IAAO;MAAAsH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAE3DvI,OAAO,iBACNjB,OAAA;MAAKmJ,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAE3BpJ,OAAA;QAAKmJ,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACnBpJ,OAAA;UACEmJ,SAAS,EAAElH,SAAS,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAG;UACnDwH,OAAO,EAAEA,CAAA,KAAMvH,YAAY,CAAC,SAAS,CAAE;UAAAkH,QAAA,EACxC;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTxJ,OAAA;UACEmJ,SAAS,EAAElH,SAAS,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAG;UAClDwH,OAAO,EAAEA,CAAA,KAAMvH,YAAY,CAAC,QAAQ,CAAE;UAAAkH,QAAA,EACvC;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTxJ,OAAA;UACEmJ,SAAS,EAAElH,SAAS,KAAK,UAAU,GAAG,QAAQ,GAAG,EAAG;UACpDwH,OAAO,EAAEA,CAAA,KAAMvH,YAAY,CAAC,UAAU,CAAE;UAAAkH,QAAA,EACzC;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTxJ,OAAA;UACEmJ,SAAS,EAAElH,SAAS,KAAK,KAAK,GAAG,QAAQ,GAAG,EAAG;UAC/CwH,OAAO,EAAEA,CAAA,KAAMvH,YAAY,CAAC,KAAK,CAAE;UAAAkH,QAAA,EACpC;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,EAGLvH,SAAS,KAAK,QAAQ,iBACrBjC,OAAA;QAASmJ,SAAS,EAAC,SAAS;QAAAC,QAAA,gBAC1BpJ,OAAA;UAAAoJ,QAAA,EAAI;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACzBxJ,OAAA;UAAM4J,QAAQ,EAAEvD,SAAU;UAAC8C,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACzCpJ,OAAA;YACEyF,IAAI,EAAC,MAAM;YACXoE,WAAW,EAAC,2BAAgB;YAC5BxB,KAAK,EAAElG,OAAO,CAACE,IAAK;YACpByH,QAAQ,EAAGxD,CAAC,IAAKlE,UAAU,CAAC;cAAC,GAAGD,OAAO;cAAEE,IAAI,EAAEiE,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YAChE2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YACE6J,WAAW,EAAC,eAAO;YACnBxB,KAAK,EAAElG,OAAO,CAACG,WAAY;YAC3BwH,QAAQ,EAAGxD,CAAC,IAAKlE,UAAU,CAAC;cAAC,GAAGD,OAAO;cAAEG,WAAW,EAAEgE,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YACvE4B,IAAI,EAAC;UAAG;YAAAZ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YAAKmJ,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC1BpJ,OAAA;cAAAoJ,QAAA,EAAO;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC7BxJ,OAAA;cACEyF,IAAI,EAAC,MAAM;cACXyE,MAAM,EAAC,SAAS;cAChBJ,QAAQ,EAAGxD,CAAC,IAAKlE,UAAU,CAAC;gBAAC,GAAGD,OAAO;gBAAEI,KAAK,EAAE+D,CAAC,CAACyD,MAAM,CAACI,KAAK,CAAC,CAAC;cAAC,CAAC,CAAE;cACpEH,QAAQ;YAAA;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNxJ,OAAA;YAAQyF,IAAI,EAAC,QAAQ;YAACiE,QAAQ,EAAE/H,OAAQ;YAACwH,SAAS,EAAC,YAAY;YAAAC,QAAA,EAC5DzH,OAAO,GAAG,iBAAiB,GAAG;UAAS;YAAA0H,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACV,EAGAvH,SAAS,KAAK,QAAQ,iBACrBjC,OAAA;QAASmJ,SAAS,EAAC,SAAS;QAAAC,QAAA,gBAC1BpJ,OAAA;UAAAoJ,QAAA,EAAI;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACpBxJ,OAAA;UAAM4J,QAAQ,EAAEtB,aAAc;UAACa,SAAS,EAAC,MAAM;UAAAC,QAAA,gBAC7CpJ,OAAA;YACEyF,IAAI,EAAC,QAAQ;YACboE,WAAW,EAAC,YAAY;YACxBxB,KAAK,EAAE7F,WAAW,CAACE,OAAQ;YAC3BoH,QAAQ,EAAGxD,CAAC,IAAK7D,cAAc,CAAC;cAAC,GAAGD,WAAW;cAAEE,OAAO,EAAE4D,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YAC3E2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YACEyF,IAAI,EAAC,MAAM;YACXoE,WAAW,EAAC,yCAAuB;YACnCxB,KAAK,EAAE7F,WAAW,CAACG,UAAW;YAC9BmH,QAAQ,EAAGxD,CAAC,IAAK7D,cAAc,CAAC;cAAC,GAAGD,WAAW;cAAEG,UAAU,EAAE2D,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YAC9E2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YACEyF,IAAI,EAAC,QAAQ;YACboE,WAAW,EAAC,uCAAqB;YACjCxB,KAAK,EAAE7F,WAAW,CAACI,QAAS;YAC5BkH,QAAQ,EAAGxD,CAAC,IAAK7D,cAAc,CAAC;cAAC,GAAGD,WAAW;cAAEI,QAAQ,EAAE0D,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YAC5E2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YAAQyF,IAAI,EAAC,QAAQ;YAACiE,QAAQ,EAAE/H,OAAQ;YAACwH,SAAS,EAAC,YAAY;YAAAC,QAAA,EAC5DzH,OAAO,GAAG,qBAAqB,GAAG;UAAa;YAAA0H,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACV,EAGAvH,SAAS,KAAK,KAAK,iBAClBjC,OAAA;QAASmJ,SAAS,EAAC,SAAS;QAAAC,QAAA,gBAC1BpJ,OAAA;UAAAoJ,QAAA,EAAI;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACfxJ,OAAA;UAAM4J,QAAQ,EAAEpB,QAAS;UAACW,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACxCpJ,OAAA;YACEyF,IAAI,EAAC,QAAQ;YACboE,WAAW,EAAC,cAAc;YAC1BxB,KAAK,EAAExF,OAAO,CAACE,SAAU;YACzB+G,QAAQ,EAAGxD,CAAC,IAAKxD,UAAU,CAAC;cAAC,GAAGD,OAAO;cAAEE,SAAS,EAAEuD,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YACrE2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YACEyF,IAAI,EAAC,MAAM;YACXoE,WAAW,EAAC,yCAAqB;YACjCxB,KAAK,EAAExF,OAAO,CAACG,MAAO;YACtB8G,QAAQ,EAAGxD,CAAC,IAAKxD,UAAU,CAAC;cAAC,GAAGD,OAAO;cAAEG,MAAM,EAAEsD,CAAC,CAACyD,MAAM,CAAC1B;YAAK,CAAC,CAAE;YAClE2B,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC,eACFxJ,OAAA;YAAQyF,IAAI,EAAC,QAAQ;YAACiE,QAAQ,EAAE/H,OAAQ;YAACwH,SAAS,EAAC,YAAY;YAAAC,QAAA,EAC5DzH,OAAO,GAAG,gBAAgB,GAAG;UAAQ;YAAA0H,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CACV,EAGAvH,SAAS,KAAK,SAAS,iBACtBjC,OAAA;QAASmJ,SAAS,EAAC,SAAS;QAAAC,QAAA,gBAC1BpJ,OAAA;UAAAoJ,QAAA,GAAI,2CAAqB,EAAC7H,IAAI,CAACqD,MAAM,EAAC,YAAK;QAAA;UAAAyE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC/CjI,IAAI,CAACqD,MAAM,KAAK,CAAC,gBAChB5E,OAAA;UAAKmJ,SAAS,EAAC,aAAa;UAAAC,QAAA,eAC1BpJ,OAAA;YAAAoJ,QAAA,EAAG;UAA8D;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClE,CAAC,gBAENxJ,OAAA;UAAKmJ,SAAS,EAAC,UAAU;UAAAC,QAAA,EACtB7H,IAAI,CAAC6I,GAAG,CAACC,GAAG,iBACXrK,OAAA;YAAmBmJ,SAAS,EAAC,UAAU;YAAAC,QAAA,gBACrCpJ,OAAA;cAAKmJ,SAAS,EAAC,WAAW;cAAAC,QAAA,eACxBpJ,OAAA;gBACEsK,GAAG,EAAED,GAAG,CAAC9H,KAAM;gBACfgI,GAAG,EAAEF,GAAG,CAAChI,IAAK;gBACdmI,OAAO,EAAGlE,CAAC,IAAK;kBACdA,CAAC,CAACyD,MAAM,CAACO,GAAG,GAAG,kDAAkD;gBACnE;cAAE;gBAAAjB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eACNxJ,OAAA;cAAKmJ,SAAS,EAAC,UAAU;cAAAC,QAAA,gBACvBpJ,OAAA;gBAAAoJ,QAAA,EAAKiB,GAAG,CAAChI;cAAI;gBAAAgH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACnBxJ,OAAA;gBAAGmJ,SAAS,EAAC,aAAa;gBAAAC,QAAA,EAAEiB,GAAG,CAAC/H;cAAW;gBAAA+G,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAChDxJ,OAAA;gBAAKmJ,SAAS,EAAC,UAAU;gBAAAC,QAAA,gBACvBpJ,OAAA;kBAAAoJ,QAAA,GAAO,YAAU,EAACiB,GAAG,CAAC3H,OAAO;gBAAA;kBAAA2G,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACtCxJ,OAAA;kBAAAoJ,QAAA,GAAO,qBAAS,EAACiB,GAAG,CAACI,MAAM;gBAAA;kBAAApB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACpCxJ,OAAA;kBAAAoJ,QAAA,GAAO,oBAAU,EAAC,IAAIR,IAAI,CAACyB,GAAG,CAACK,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC;gBAAA;kBAAAtB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA,GAlBEa,GAAG,CAACO,GAAG;YAAAvB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAmBZ,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CACV,EAGAvH,SAAS,KAAK,UAAU,iBACvBjC,OAAA;QAASmJ,SAAS,EAAC,SAAS;QAAAC,QAAA,gBAC1BpJ,OAAA;UAAAoJ,QAAA,GAAI,+CAAsB,EAAC3H,QAAQ,CAACmD,MAAM,EAAC,GAAC;QAAA;UAAAyE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAChD/H,QAAQ,CAACmD,MAAM,KAAK,CAAC,gBACpB5E,OAAA;UAAKmJ,SAAS,EAAC,aAAa;UAAAC,QAAA,eAC1BpJ,OAAA;YAAAoJ,QAAA,EAAG;UAAqE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzE,CAAC,gBAENxJ,OAAA;UAAKmJ,SAAS,EAAC,eAAe;UAAAC,QAAA,EAC3B3H,QAAQ,CAAC2I,GAAG,CAAC1G,OAAO;YAAA,IAAAmH,aAAA;YAAA,oBACnB7K,OAAA;cAAuBmJ,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAC7CpJ,OAAA;gBAAKmJ,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,gBAC7BpJ,OAAA;kBAAAoJ,QAAA,GAAI,wBAAS,EAAC1F,OAAO,CAACX,SAAS;gBAAA;kBAAAsG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACrCxJ,OAAA;kBAAMmJ,SAAS,EAAE,UAAUV,mBAAmB,CAAC/E,OAAO,CAACgF,OAAO,CAAC,KAAK,aAAa,GAAG,OAAO,GAAG,QAAQ,EAAG;kBAAAU,QAAA,EACtGX,mBAAmB,CAAC/E,OAAO,CAACgF,OAAO;gBAAC;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACjC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,EAEL9F,OAAO,CAACoH,WAAW,iBAClB9K,OAAA;gBAAKmJ,SAAS,EAAC,aAAa;gBAAAC,QAAA,gBAC1BpJ,OAAA;kBACEsK,GAAG,EAAE5G,OAAO,CAACoH,WAAW,CAACvI,KAAM;kBAC/BgI,GAAG,EAAE7G,OAAO,CAACoH,WAAW,CAACzI,IAAK;kBAC9BmI,OAAO,EAAGlE,CAAC,IAAK;oBACdA,CAAC,CAACyD,MAAM,CAACO,GAAG,GAAG,kDAAkD;kBACnE;gBAAE;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACFxJ,OAAA;kBAAKmJ,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAC1BpJ,OAAA;oBAAAoJ,QAAA,EAAK1F,OAAO,CAACoH,WAAW,CAACzI;kBAAI;oBAAAgH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACnCxJ,OAAA;oBAAAoJ,QAAA,EAAI1F,OAAO,CAACoH,WAAW,CAACxI;kBAAW;oBAAA+G,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CACN,eAEDxJ,OAAA;gBAAKmJ,SAAS,EAAC,iBAAiB;gBAAAC,QAAA,gBAC9BpJ,OAAA;kBAAKmJ,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzBpJ,OAAA;oBAAAoJ,QAAA,EAAM;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACtBxJ,OAAA;oBAAAoJ,QAAA,EAAO1F,OAAO,CAAChB;kBAAO;oBAAA2G,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3B,CAAC,eACNxJ,OAAA;kBAAKmJ,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzBpJ,OAAA;oBAAAoJ,QAAA,EAAM;kBAAU;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACvBxJ,OAAA;oBAAMmJ,SAAS,EAAC,SAAS;oBAAAC,QAAA,GAAE1F,OAAO,CAACqH,MAAM,CAACvG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,KAAG,EAACd,OAAO,CAACqH,MAAM,CAACvG,KAAK,CAAC,CAAC,CAAC,CAAC;kBAAA;oBAAA6E,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvF,CAAC,eACNxJ,OAAA;kBAAKmJ,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzBpJ,OAAA;oBAAAoJ,QAAA,EAAM;kBAAa;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC1BxJ,OAAA;oBAAMmJ,SAAS,EAAC,YAAY;oBAAAC,QAAA,GACzBtJ,MAAM,CAACkL,WAAW,CAACtH,OAAO,CAACuH,UAAU,IAAI,GAAG,CAAC,EAAC,MACjD;kBAAA;oBAAA5B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACNxJ,OAAA;kBAAKmJ,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzBpJ,OAAA;oBAAAoJ,QAAA,EAAM;kBAAe;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5BxJ,OAAA;oBAAAoJ,QAAA,EAAO,EAAAyB,aAAA,GAAAnH,OAAO,CAACwH,IAAI,cAAAL,aAAA,uBAAZA,aAAA,CAAcjG,MAAM,KAAI;kBAAC;oBAAAyE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrC,CAAC,eACNxJ,OAAA;kBAAKmJ,SAAS,EAAC,YAAY;kBAAAC,QAAA,gBACzBpJ,OAAA;oBAAAoJ,QAAA,EAAM;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACtBxJ,OAAA;oBAAAoJ,QAAA,EAAO,IAAIR,IAAI,CAAClF,OAAO,CAACgF,OAAO,CAAC,CAACyC,cAAc,CAAC,OAAO;kBAAC;oBAAA9B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7D,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,EAEL9F,OAAO,CAAC0H,aAAa,IAAI1H,OAAO,CAAC0H,aAAa,KAAK,4CAA4C,iBAC9FpL,OAAA;gBAAKmJ,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,GAAC,2CACP,EAAC1F,OAAO,CAAC0H,aAAa,CAAC5G,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC,KAAG,EAACd,OAAO,CAAC0H,aAAa,CAAC5G,KAAK,CAAC,CAAC,CAAC,CAAC;cAAA;gBAAA6E,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1F,CACN;YAAA,GArDO9F,OAAO,CAACkH,GAAG;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAsDhB,CAAC;UAAA,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CACV;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,EAEA7H,OAAO,iBACN3B,OAAA;MAAKmJ,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC9BpJ,OAAA;QAAKmJ,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAAW;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC5I,EAAA,CA3tBQD,GAAG;AAAA0K,EAAA,GAAH1K,GAAG;AA6tBZ,eAAeA,GAAG;AAAC,IAAA0K,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}