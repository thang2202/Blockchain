{"ast":null,"code":"var _jsxFileName = \"D:\\\\2\\\\Z_Blockchain\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { ethers } from 'ethers';\nimport './App.css';\n\n// Contract addresses (update after deployment)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ART_TOKEN_ADDRESS = process.env.REACT_APP_ART_TOKEN_ADDRESS;\nconst AUCTION_ADDRESS = process.env.REACT_APP_AUCTION_ADDRESS;\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000/api';\n\n// Simple ABI for demonstration (use full ABI from compilation)\nconst ART_TOKEN_ABI = [\"function safeMint(address to) public returns (uint256)\", \"function ownerOf(uint256 tokenId) public view returns (address)\", \"function transferFrom(address from, address to, uint256 tokenId) public\", \"function approve(address to, uint256 tokenId) public\", \"function balanceOf(address owner) public view returns (uint256)\", \"function currentTokenId() public view returns (uint256)\", \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"];\nconst AUCTION_ABI = [\"function createAuction(uint256 _tokenId, uint256 _startPrice, uint256 _durationInMinutes) external\", \"function placeBid(uint256 _auctionId) external payable\", \"function endAuction(uint256 _auctionId) external\", \"function getAuctionDetails(uint256 _auctionId) external view returns (tuple(uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended))\", \"function auctions(uint256) public view returns (uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended)\", \"function getCurrentAuctionId() public view returns (uint256)\", \"event AuctionCreated(uint256 indexed auctionId, uint256 indexed tokenId, address seller, uint256 startPrice, uint256 endTime)\", \"event NewBid(uint256 indexed auctionId, address bidder, uint256 amount)\", \"event AuctionEnded(uint256 indexed auctionId, address winner, uint256 amount)\"];\nfunction App() {\n  _s();\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [account, setAccount] = useState('');\n  const [artTokenContract, setArtTokenContract] = useState(null);\n  const [auctionContract, setAuctionContract] = useState(null);\n  const [nfts, setNfts] = useState([]);\n  const [auctions, setAuctions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [activeTab, setActiveTab] = useState('gallery');\n\n  // Form states\n  const [nftForm, setNftForm] = useState({\n    name: '',\n    description: '',\n    image: null\n  });\n  const [auctionForm, setAuctionForm] = useState({\n    tokenId: '',\n    startPrice: '',\n    duration: ''\n  });\n  const [bidForm, setBidForm] = useState({\n    auctionId: '',\n    amount: ''\n  });\n\n  // Refs Ä‘á»ƒ trÃ¡nh re-render vÃ´ háº¡n vÃ  theo dÃµi state hiá»‡n táº¡i\n  const isInitialized = useRef(false);\n  const currentAccountRef = useRef('');\n\n  // HÃ m khá»Ÿi táº¡o contracts\n  const initializeContracts = async web3Signer => {\n    try {\n      const artToken = new ethers.Contract(ART_TOKEN_ADDRESS, ART_TOKEN_ABI, web3Signer);\n      const auction = new ethers.Contract(AUCTION_ADDRESS, AUCTION_ABI, web3Signer);\n      setArtTokenContract(artToken);\n      setAuctionContract(auction);\n      console.log('âœ… Contracts initialized for account:', await web3Signer.getAddress());\n    } catch (error) {\n      console.error('âŒ Error initializing contracts:', error);\n    }\n  };\n\n  // HÃ m cáº­p nháº­t provider vÃ  signer\n  const updateProviderAndSigner = async () => {\n    if (window.ethereum) {\n      try {\n        const web3Provider = new ethers.BrowserProvider(window.ethereum);\n        const newSigner = await web3Provider.getSigner();\n        const newAccount = await newSigner.getAddress();\n        setProvider(web3Provider);\n        setSigner(newSigner);\n        setAccount(newAccount);\n        currentAccountRef.current = newAccount; // Cáº­p nháº­t ref\n\n        await initializeContracts(newSigner);\n        console.log('ğŸ”„ Account updated to:', newAccount);\n        showMessage(`ÄÃ£ chuyá»ƒn sang tÃ i khoáº£n: ${newAccount.slice(0, 6)}...${newAccount.slice(-4)}`, 'success');\n\n        // Fetch láº¡i dá»¯ liá»‡u\n        fetchNFTs();\n        fetchActiveAuctions();\n      } catch (error) {\n        console.error('âŒ Error updating provider and signer:', error);\n      }\n    }\n  };\n\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n accountsChanged - ÄÃƒ Sá»¬A\n  const handleAccountsChanged = async accounts => {\n    console.log('ğŸ”„ Accounts changed:', accounts);\n    console.log('ğŸ“ Current account in ref:', currentAccountRef.current);\n    if (accounts.length === 0) {\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ disconnect\n      console.log('ğŸ‘¤ User disconnected');\n      setAccount('');\n      currentAccountRef.current = '';\n      setProvider(null);\n      setSigner(null);\n      setArtTokenContract(null);\n      setAuctionContract(null);\n      showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'error');\n    } else {\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ chuyá»ƒn tÃ i khoáº£n\n      const newAccount = accounts[0];\n      console.log('ğŸ” Comparing:', newAccount.toLowerCase(), 'vs', currentAccountRef.current.toLowerCase());\n\n      // So sÃ¡nh vá»›i ref thay vÃ¬ state\n      if (newAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\n        console.log('ğŸ”„ Switching to new account:', newAccount);\n        await updateProviderAndSigner();\n      } else {\n        console.log('âœ… Same account, no change needed');\n      }\n    }\n  };\n\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n chainChanged\n  const handleChainChanged = chainId => {\n    console.log('ğŸ”„ Chain changed:', chainId);\n    // Reload page khi chain thay Ä‘á»•i\n    window.location.reload();\n  };\n  useEffect(() => {\n    if (account && artTokenContract && auctionContract) {\n      fetchNFTs();\n      fetchActiveAuctions();\n    }\n  }, [account, artTokenContract, auctionContract]);\n  useEffect(() => {\n    // Chá»‰ thiáº¿t láº­p event listeners má»™t láº§n\n    if (isInitialized.current) return;\n    if (window.ethereum) {\n      console.log('ğŸ”§ Setting up MetaMask event listeners...');\n\n      // Kiá»ƒm tra xem Ä‘Ã£ cÃ³ account nÃ o Ä‘Æ°á»£c káº¿t ná»‘i chÆ°a\n      const checkConnectedAccount = async () => {\n        try {\n          const accounts = await window.ethereum.request({\n            method: 'eth_accounts'\n          });\n          if (accounts.length > 0) {\n            console.log('ğŸ” Found connected account:', accounts[0]);\n            // Tá»± Ä‘á»™ng káº¿t ná»‘i vá»›i account Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i trÆ°á»›c Ä‘Ã³\n            await updateProviderAndSigner();\n          }\n        } catch (error) {\n          console.error('âŒ Error checking connected accounts:', error);\n        }\n      };\n      checkConnectedAccount();\n\n      // Thiáº¿t láº­p event listeners\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\n      window.ethereum.on('chainChanged', handleChainChanged);\n      isInitialized.current = true;\n\n      // Cleanup function\n      return () => {\n        console.log('ğŸ§¹ Cleaning up event listeners...');\n        if (window.ethereum) {\n          window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\n          window.ethereum.removeListener('chainChanged', handleChainChanged);\n        }\n      };\n    }\n  }, []);\n  const showMessage = (message, type = 'error') => {\n    if (type === 'error') {\n      setError(message);\n      setTimeout(() => setError(''), 5000);\n    } else {\n      setSuccess(message);\n      setTimeout(() => setSuccess(''), 5000);\n    }\n  };\n  const connectWallet = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      if (!window.ethereum) {\n        throw new Error('Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!');\n      }\n\n      // YÃªu cáº§u káº¿t ná»‘i vÃ­\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      if (accounts.length === 0) {\n        throw new Error('KhÃ´ng cÃ³ tÃ i khoáº£n nÃ o Ä‘Æ°á»£c káº¿t ná»‘i');\n      }\n      const web3Provider = new ethers.BrowserProvider(window.ethereum);\n      const web3Signer = await web3Provider.getSigner();\n      const userAddress = await web3Signer.getAddress();\n      setProvider(web3Provider);\n      setSigner(web3Signer);\n      setAccount(userAddress);\n      currentAccountRef.current = userAddress; // Cáº­p nháº­t ref\n\n      // Khá»Ÿi táº¡o contracts\n      await initializeContracts(web3Signer);\n      showMessage(`Káº¿t ná»‘i vÃ­ thÃ nh cÃ´ng! TÃ i khoáº£n: ${userAddress.slice(0, 6)}...${userAddress.slice(-4)}`, 'success');\n    } catch (error) {\n      console.error('âŒ Lá»—i káº¿t ná»‘i vÃ­:', error);\n      let errorMessage = error.message;\n      if (error.code === 4001) {\n        errorMessage = 'NgÆ°á»i dÃ¹ng Ä‘Ã£ tá»« chá»‘i káº¿t ná»‘i vÃ­';\n      }\n      showMessage(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const disconnectWallet = async () => {\n    try {\n      // Trong MetaMask, chÃºng ta khÃ´ng thá»ƒ thá»±c sá»± \"disconnect\" programmatically\n      // NhÆ°ng cÃ³ thá»ƒ reset state\n      setAccount('');\n      currentAccountRef.current = '';\n      setProvider(null);\n      setSigner(null);\n      setArtTokenContract(null);\n      setAuctionContract(null);\n      setNfts([]);\n      setAuctions([]);\n      showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'success');\n    } catch (error) {\n      console.error('âŒ Lá»—i khi ngáº¯t káº¿t ná»‘i:', error);\n    }\n  };\n  const fetchNFTs = async () => {\n    try {\n      console.log('ğŸ“¡ Fetching NFTs...');\n      const response = await fetch(`${API_BASE}/nfts`);\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch NFTs');\n      const data = await response.json();\n      setNfts(data);\n      console.log(`âœ… Loaded ${data.length} NFTs`);\n    } catch (error) {\n      console.error('âŒ Lá»—i táº£i NFTs:', error);\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch NFTs');\n    }\n  };\n  const fetchActiveAuctions = async () => {\n    try {\n      console.log('ğŸ“¡ Fetching active auctions...');\n      const response = await fetch(`${API_BASE}/active-auctions`);\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch Ä‘áº¥u giÃ¡');\n      const data = await response.json();\n      setAuctions(data);\n      console.log(`âœ… Loaded ${data.length} active auctions`);\n    } catch (error) {\n      console.error('âŒ Lá»—i táº£i Ä‘áº¥u giÃ¡:', error);\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘áº¥u giÃ¡');\n    }\n  };\n  const createNFT = async e => {\n    e.preventDefault();\n    if (!nftForm.name || !nftForm.image) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      console.log('ğŸ”„ Báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº¡o NFT...');\n\n      // Upload artwork to backend\n      const formData = new FormData();\n      formData.append('name', nftForm.name);\n      formData.append('description', nftForm.description || '');\n      formData.append('artist', 'Digital Artist');\n      formData.append('artistAddress', account);\n      formData.append('image', nftForm.image);\n      console.log('ğŸ“¤ Äang upload artwork...');\n      const uploadResponse = await fetch(`${API_BASE}/upload-artwork`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!uploadResponse.ok) {\n        throw new Error(`Upload tháº¥t báº¡i vá»›i status: ${uploadResponse.status}`);\n      }\n      const uploadData = await uploadResponse.json();\n      if (!uploadData.success) {\n        throw new Error(uploadData.error || 'Upload khÃ´ng thÃ nh cÃ´ng');\n      }\n      console.log('âœ… Upload thÃ nh cÃ´ng, Ä‘ang mint NFT...');\n\n      // Mint NFT on blockchain\n      const tx = await artTokenContract.safeMint(account);\n      console.log('â›“ï¸ Transaction sent:', tx.hash);\n      const receipt = await tx.wait();\n      console.log('âœ… Transaction confirmed');\n\n      // Get token ID tá»« event\n      let tokenId = '0';\n      const transferInterface = new ethers.Interface(['event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)']);\n      for (const log of receipt.logs) {\n        try {\n          const parsedLog = transferInterface.parseLog(log);\n          if (parsedLog && parsedLog.name === 'Transfer') {\n            tokenId = parsedLog.args.tokenId.toString();\n            break;\n          }\n        } catch (e) {\n          // Bá» qua log khÃ´ng pháº£i Transfer event\n        }\n      }\n      console.log('ğŸ¯ Token ID:', tokenId);\n\n      // Save metadata to backend\n      const saveResponse = await fetch(`${API_BASE}/nft-metadata`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          tokenId,\n          ...uploadData.metadata,\n          imageIpfsHash: uploadData.imageIpfsHash,\n          metadataIpfsHash: uploadData.metadataIpfsHash\n        })\n      });\n      if (!saveResponse.ok) {\n        throw new Error('LÆ°u metadata tháº¥t báº¡i');\n      }\n      console.log('âœ… Metadata saved');\n      showMessage('Táº¡o NFT thÃ nh cÃ´ng!', 'success');\n      setNftForm({\n        name: '',\n        description: '',\n        image: null\n      });\n\n      // Reset file input\n      const fileInput = document.querySelector('input[type=\"file\"]');\n      if (fileInput) fileInput.value = '';\n      fetchNFTs();\n    } catch (error) {\n      console.error('âŒ Lá»—i táº¡o NFT:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const createAuction = async e => {\n    e.preventDefault();\n    if (!auctionForm.tokenId || !auctionForm.startPrice || !auctionForm.duration) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      const tx = await auctionContract.createAuction(auctionForm.tokenId, ethers.parseEther(auctionForm.startPrice), auctionForm.duration);\n      await tx.wait();\n      showMessage('Táº¡o Ä‘áº¥u giÃ¡ thÃ nh cÃ´ng!', 'success');\n      setAuctionForm({\n        tokenId: '',\n        startPrice: '',\n        duration: ''\n      });\n      fetchActiveAuctions();\n    } catch (error) {\n      console.error('Lá»—i táº¡o Ä‘áº¥u giÃ¡:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const placeBid = async e => {\n    e.preventDefault();\n    if (!bidForm.auctionId || !bidForm.amount) {\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\n      return;\n    }\n    setLoading(true);\n    try {\n      const tx = await auctionContract.placeBid(bidForm.auctionId, {\n        value: ethers.parseEther(bidForm.amount)\n      });\n      await tx.wait();\n      showMessage('Ra giÃ¡ thÃ nh cÃ´ng!', 'success');\n      setBidForm({\n        auctionId: '',\n        amount: ''\n      });\n      fetchActiveAuctions();\n    } catch (error) {\n      console.error('Lá»—i ra giÃ¡:', error);\n      showMessage(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatTimeRemaining = endTime => {\n    const now = new Date();\n    const end = new Date(endTime);\n    const diff = end - now;\n    if (diff <= 0) return 'ÄÃ£ káº¿t thÃºc';\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    const minutes = Math.floor(diff % (1000 * 60 * 60) / (1000 * 60));\n    return `${hours}giá» ${minutes}phÃºt`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83C\\uDFA8 N\\u1EC1n t\\u1EA3ng \\u0111\\u1EA5u gi\\xE1 ngh\\u1EC7 thu\\u1EADt s\\u1ED1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), !account ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectWallet,\n        disabled: loading,\n        className: \"connect-btn\",\n        children: loading ? 'Äang káº¿t ná»‘i...' : 'Káº¿t ná»‘i MetaMask'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"account-address\",\n            children: [\"T\\xE0i kho\\u1EA3n: \", account.slice(0, 6), \"...\", account.slice(-4)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: disconnectWallet,\n            className: \"disconnect-btn\",\n            title: \"Ng\\u1EAFt k\\u1EBFt n\\u1ED1i\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-hint\",\n          children: \"\\uD83D\\uDCA1 Th\\u1EED \\u0111\\u1ED5i t\\xE0i kho\\u1EA3n trong MetaMask \\u0111\\u1EC3 ki\\u1EC3m tra t\\xEDnh n\\u0103ng t\\u1EF1 \\u0111\\u1ED9ng chuy\\u1EC3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message success\",\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 19\n    }, this), account && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'gallery' ? 'active' : '',\n          onClick: () => setActiveTab('gallery'),\n          children: \"Th\\u01B0 vi\\u1EC7n ngh\\u1EC7 thu\\u1EADt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'create' ? 'active' : '',\n          onClick: () => setActiveTab('create'),\n          children: \"T\\u1EA1o NFT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'auctions' ? 'active' : '',\n          onClick: () => setActiveTab('auctions'),\n          children: \"\\u0110\\u1EA5u gi\\xE1 \\u0111ang di\\u1EC5n ra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: activeTab === 'bid' ? 'active' : '',\n          onClick: () => setActiveTab('bid'),\n          children: \"Ra gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 11\n      }, this), activeTab === 'create' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"T\\u1EA1o t\\xE1c ph\\u1EA9m m\\u1EDBi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: createNFT,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"T\\xEAn t\\xE1c ph\\u1EA9m *\",\n            value: nftForm.name,\n            onChange: e => setNftForm({\n              ...nftForm,\n              name: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: \"M\\xF4 t\\u1EA3\",\n            value: nftForm.description,\n            onChange: e => setNftForm({\n              ...nftForm,\n              description: e.target.value\n            }),\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"file-upload\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u1EA2nh t\\xE1c ph\\u1EA9m *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: e => setNftForm({\n                ...nftForm,\n                image: e.target.files[0]\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang táº¡o NFT...' : 'Táº¡o NFT'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 13\n      }, this), activeTab === 'create' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"T\\u1EA1o \\u0111\\u1EA5u gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: createAuction,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Token ID *\",\n            value: auctionForm.tokenId,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              tokenId: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Gi\\xE1 kh\\u1EDFi \\u0111i\\u1EC3m (ETH) *\",\n            value: auctionForm.startPrice,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              startPrice: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Th\\u1EDDi l\\u01B0\\u1EE3ng (ph\\xFAt) *\",\n            value: auctionForm.duration,\n            onChange: e => setAuctionForm({\n              ...auctionForm,\n              duration: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang táº¡o Ä‘áº¥u giÃ¡...' : 'Táº¡o Ä‘áº¥u giÃ¡'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 13\n      }, this), activeTab === 'bid' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Ra gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: placeBid,\n          className: \"form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Auction ID *\",\n            value: bidForm.auctionId,\n            onChange: e => setBidForm({\n              ...bidForm,\n              auctionId: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"S\\u1ED1 ti\\u1EC1n \\u0111\\u1EB7t (ETH) *\",\n            value: bidForm.amount,\n            onChange: e => setBidForm({\n              ...bidForm,\n              amount: e.target.value\n            }),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"submit-btn\",\n            children: loading ? 'Äang ra giÃ¡...' : 'Ra giÃ¡'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 13\n      }, this), activeTab === 'gallery' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Th\\u01B0 vi\\u1EC7n ngh\\u1EC7 thu\\u1EADt (\", nfts.length, \" m\\u1EE5c)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 15\n        }, this), nfts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ch\\u01B0a c\\xF3 t\\xE1c ph\\u1EA9m ngh\\u1EC7 thu\\u1EADt n\\xE0o. H\\xE3y t\\u1EA1o NFT \\u0111\\u1EA7u ti\\xEAn c\\u1EE7a b\\u1EA1n!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nft-grid\",\n          children: nfts.map(nft => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nft-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"nft-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: nft.image,\n                alt: nft.name,\n                onError: e => {\n                  e.target.src = 'https://via.placeholder.com/300x300?text=Artwork';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"nft-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: nft.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"description\",\n                children: nft.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"nft-meta\",\n                children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Token ID: \", nft.tokenId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Ngh\\u1EC7 s\\u0129: \", nft.artist]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: [\"Ng\\xE0y t\\u1EA1o: \", new Date(nft.createdAt).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 23\n            }, this)]\n          }, nft._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 13\n      }, this), activeTab === 'auctions' && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u0110\\u1EA5u gi\\xE1 \\u0111ang di\\u1EC5n ra (\", auctions.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 15\n        }, this), auctions.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Ch\\u01B0a c\\xF3 \\u0111\\u1EA5u gi\\xE1 n\\xE0o \\u0111ang di\\u1EC5n ra. H\\xE3y t\\u1EA1o m\\u1ED9t \\u0111\\u1EA5u gi\\xE1 t\\u1EEB NFT c\\u1EE7a b\\u1EA1n!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auctions-grid\",\n          children: auctions.map(auction => {\n            var _auction$bids;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"auction-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [\"\\u0110\\u1EA5u gi\\xE1 #\", auction.auctionId]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status ${formatTimeRemaining(auction.endTime) === 'ÄÃ£ káº¿t thÃºc' ? 'ended' : 'active'}`,\n                  children: formatTimeRemaining(auction.endTime)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 671,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 23\n              }, this), auction.nftMetadata && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-nft\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: auction.nftMetadata.image,\n                  alt: auction.nftMetadata.name,\n                  onError: e => {\n                    e.target.src = 'https://via.placeholder.com/200x200?text=Artwork';\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"nft-details\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: auction.nftMetadata.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 686,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: auction.nftMetadata.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"auction-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Token ID:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 694,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: auction.tokenId\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 695,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Ng\\u01B0\\u1EDDi b\\xE1n:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 698,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"address\",\n                    children: [auction.seller.slice(0, 6), \"...\", auction.seller.slice(-4)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 699,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 697,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Gi\\xE1 hi\\u1EC7n t\\u1EA1i:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"bid-amount\",\n                    children: [ethers.formatEther(auction.highestBid || '0'), \" ETH\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"S\\u1ED1 l\\u01B0\\u1EE3t ra gi\\xE1:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 708,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: ((_auction$bids = auction.bids) === null || _auction$bids === void 0 ? void 0 : _auction$bids.length) || 0\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 709,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"detail-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"K\\u1EBFt th\\xFAc:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 712,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: new Date(auction.endTime).toLocaleString('vi-VN')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 23\n              }, this), auction.highestBidder && auction.highestBidder !== '0x0000000000000000000000000000000000000000' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-bidder\",\n                children: [\"Ng\\u01B0\\u1EDDi ra gi\\xE1 cao nh\\u1EA5t: \", auction.highestBidder.slice(0, 6), \"...\", auction.highestBidder.slice(-4)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 25\n              }, this)]\n            }, auction._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 732,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 461,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"3S/j3mFg+al2GyGJnvFtT9jIYYw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ethers","jsxDEV","_jsxDEV","ART_TOKEN_ADDRESS","process","env","REACT_APP_ART_TOKEN_ADDRESS","AUCTION_ADDRESS","REACT_APP_AUCTION_ADDRESS","API_BASE","REACT_APP_BACKEND_URL","ART_TOKEN_ABI","AUCTION_ABI","App","_s","provider","setProvider","signer","setSigner","account","setAccount","artTokenContract","setArtTokenContract","auctionContract","setAuctionContract","nfts","setNfts","auctions","setAuctions","loading","setLoading","error","setError","success","setSuccess","activeTab","setActiveTab","nftForm","setNftForm","name","description","image","auctionForm","setAuctionForm","tokenId","startPrice","duration","bidForm","setBidForm","auctionId","amount","isInitialized","currentAccountRef","initializeContracts","web3Signer","artToken","Contract","auction","console","log","getAddress","updateProviderAndSigner","window","ethereum","web3Provider","BrowserProvider","newSigner","getSigner","newAccount","current","showMessage","slice","fetchNFTs","fetchActiveAuctions","handleAccountsChanged","accounts","length","toLowerCase","handleChainChanged","chainId","location","reload","checkConnectedAccount","request","method","on","removeListener","message","type","setTimeout","connectWallet","Error","userAddress","errorMessage","code","disconnectWallet","response","fetch","ok","data","json","createNFT","e","preventDefault","formData","FormData","append","uploadResponse","body","status","uploadData","tx","safeMint","hash","receipt","wait","transferInterface","Interface","logs","parsedLog","parseLog","args","toString","saveResponse","headers","JSON","stringify","metadata","imageIpfsHash","metadataIpfsHash","fileInput","document","querySelector","value","createAuction","parseEther","placeBid","formatTimeRemaining","endTime","now","Date","end","diff","hours","Math","floor","minutes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","title","onSubmit","placeholder","onChange","target","required","rows","accept","files","map","nft","src","alt","onError","artist","createdAt","toLocaleDateString","_id","_auction$bids","nftMetadata","seller","formatEther","highestBid","bids","toLocaleString","highestBidder","_c","$RefreshReg$"],"sources":["D:/2/Z_Blockchain/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport './App.css';\r\n\r\n// Contract addresses (update after deployment)\r\nconst ART_TOKEN_ADDRESS = process.env.REACT_APP_ART_TOKEN_ADDRESS;\r\nconst AUCTION_ADDRESS = process.env.REACT_APP_AUCTION_ADDRESS;\r\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000/api';\r\n\r\n// Simple ABI for demonstration (use full ABI from compilation)\r\nconst ART_TOKEN_ABI = [\r\n  \"function safeMint(address to) public returns (uint256)\",\r\n  \"function ownerOf(uint256 tokenId) public view returns (address)\",\r\n  \"function transferFrom(address from, address to, uint256 tokenId) public\",\r\n  \"function approve(address to, uint256 tokenId) public\",\r\n  \"function balanceOf(address owner) public view returns (uint256)\",\r\n  \"function currentTokenId() public view returns (uint256)\",\r\n  \"event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)\"\r\n];\r\n\r\nconst AUCTION_ABI = [\r\n  \"function createAuction(uint256 _tokenId, uint256 _startPrice, uint256 _durationInMinutes) external\",\r\n  \"function placeBid(uint256 _auctionId) external payable\",\r\n  \"function endAuction(uint256 _auctionId) external\",\r\n  \"function getAuctionDetails(uint256 _auctionId) external view returns (tuple(uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended))\",\r\n  \"function auctions(uint256) public view returns (uint256 tokenId, address seller, uint256 startTime, uint256 endTime, uint256 startPrice, address highestBidder, uint256 highestBid, bool ended)\",\r\n  \"function getCurrentAuctionId() public view returns (uint256)\",\r\n  \"event AuctionCreated(uint256 indexed auctionId, uint256 indexed tokenId, address seller, uint256 startPrice, uint256 endTime)\",\r\n  \"event NewBid(uint256 indexed auctionId, address bidder, uint256 amount)\",\r\n  \"event AuctionEnded(uint256 indexed auctionId, address winner, uint256 amount)\"\r\n];\r\n\r\nfunction App() {\r\n  const [provider, setProvider] = useState(null);\r\n  const [signer, setSigner] = useState(null);\r\n  const [account, setAccount] = useState('');\r\n  const [artTokenContract, setArtTokenContract] = useState(null);\r\n  const [auctionContract, setAuctionContract] = useState(null);\r\n  const [nfts, setNfts] = useState([]);\r\n  const [auctions, setAuctions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [activeTab, setActiveTab] = useState('gallery');\r\n\r\n  // Form states\r\n  const [nftForm, setNftForm] = useState({\r\n    name: '',\r\n    description: '',\r\n    image: null\r\n  });\r\n  const [auctionForm, setAuctionForm] = useState({\r\n    tokenId: '',\r\n    startPrice: '',\r\n    duration: ''\r\n  });\r\n  const [bidForm, setBidForm] = useState({\r\n    auctionId: '',\r\n    amount: ''\r\n  });\r\n\r\n  // Refs Ä‘á»ƒ trÃ¡nh re-render vÃ´ háº¡n vÃ  theo dÃµi state hiá»‡n táº¡i\r\n  const isInitialized = useRef(false);\r\n  const currentAccountRef = useRef('');\r\n\r\n  // HÃ m khá»Ÿi táº¡o contracts\r\n  const initializeContracts = async (web3Signer) => {\r\n    try {\r\n      const artToken = new ethers.Contract(ART_TOKEN_ADDRESS, ART_TOKEN_ABI, web3Signer);\r\n      const auction = new ethers.Contract(AUCTION_ADDRESS, AUCTION_ABI, web3Signer);\r\n      \r\n      setArtTokenContract(artToken);\r\n      setAuctionContract(auction);\r\n      console.log('âœ… Contracts initialized for account:', await web3Signer.getAddress());\r\n    } catch (error) {\r\n      console.error('âŒ Error initializing contracts:', error);\r\n    }\r\n  };\r\n\r\n  // HÃ m cáº­p nháº­t provider vÃ  signer\r\n  const updateProviderAndSigner = async () => {\r\n    if (window.ethereum) {\r\n      try {\r\n        const web3Provider = new ethers.BrowserProvider(window.ethereum);\r\n        const newSigner = await web3Provider.getSigner();\r\n        const newAccount = await newSigner.getAddress();\r\n        \r\n        setProvider(web3Provider);\r\n        setSigner(newSigner);\r\n        setAccount(newAccount);\r\n        currentAccountRef.current = newAccount; // Cáº­p nháº­t ref\r\n        \r\n        await initializeContracts(newSigner);\r\n        \r\n        console.log('ğŸ”„ Account updated to:', newAccount);\r\n        showMessage(`ÄÃ£ chuyá»ƒn sang tÃ i khoáº£n: ${newAccount.slice(0, 6)}...${newAccount.slice(-4)}`, 'success');\r\n        \r\n        // Fetch láº¡i dá»¯ liá»‡u\r\n        fetchNFTs();\r\n        fetchActiveAuctions();\r\n      } catch (error) {\r\n        console.error('âŒ Error updating provider and signer:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n accountsChanged - ÄÃƒ Sá»¬A\r\n  const handleAccountsChanged = async (accounts) => {\r\n    console.log('ğŸ”„ Accounts changed:', accounts);\r\n    console.log('ğŸ“ Current account in ref:', currentAccountRef.current);\r\n    \r\n    if (accounts.length === 0) {\r\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ disconnect\r\n      console.log('ğŸ‘¤ User disconnected');\r\n      setAccount('');\r\n      currentAccountRef.current = '';\r\n      setProvider(null);\r\n      setSigner(null);\r\n      setArtTokenContract(null);\r\n      setAuctionContract(null);\r\n      showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'error');\r\n    } else {\r\n      // NgÆ°á»i dÃ¹ng Ä‘Ã£ chuyá»ƒn tÃ i khoáº£n\r\n      const newAccount = accounts[0];\r\n      console.log('ğŸ” Comparing:', newAccount.toLowerCase(), 'vs', currentAccountRef.current.toLowerCase());\r\n      \r\n      // So sÃ¡nh vá»›i ref thay vÃ¬ state\r\n      if (newAccount.toLowerCase() !== currentAccountRef.current.toLowerCase()) {\r\n        console.log('ğŸ”„ Switching to new account:', newAccount);\r\n        await updateProviderAndSigner();\r\n      } else {\r\n        console.log('âœ… Same account, no change needed');\r\n      }\r\n    }\r\n  };\r\n\r\n  // HÃ m xá»­ lÃ½ sá»± kiá»‡n chainChanged\r\n  const handleChainChanged = (chainId) => {\r\n    console.log('ğŸ”„ Chain changed:', chainId);\r\n    // Reload page khi chain thay Ä‘á»•i\r\n    window.location.reload();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (account && artTokenContract && auctionContract) {\r\n      fetchNFTs();\r\n      fetchActiveAuctions();\r\n    }\r\n  }, [account, artTokenContract, auctionContract]);\r\n\r\n  useEffect(() => {\r\n    // Chá»‰ thiáº¿t láº­p event listeners má»™t láº§n\r\n    if (isInitialized.current) return;\r\n    \r\n    if (window.ethereum) {\r\n      console.log('ğŸ”§ Setting up MetaMask event listeners...');\r\n      \r\n      // Kiá»ƒm tra xem Ä‘Ã£ cÃ³ account nÃ o Ä‘Æ°á»£c káº¿t ná»‘i chÆ°a\r\n      const checkConnectedAccount = async () => {\r\n        try {\r\n          const accounts = await window.ethereum.request({ \r\n            method: 'eth_accounts' \r\n          });\r\n          if (accounts.length > 0) {\r\n            console.log('ğŸ” Found connected account:', accounts[0]);\r\n            // Tá»± Ä‘á»™ng káº¿t ná»‘i vá»›i account Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i trÆ°á»›c Ä‘Ã³\r\n            await updateProviderAndSigner();\r\n          }\r\n        } catch (error) {\r\n          console.error('âŒ Error checking connected accounts:', error);\r\n        }\r\n      };\r\n      \r\n      checkConnectedAccount();\r\n      \r\n      // Thiáº¿t láº­p event listeners\r\n      window.ethereum.on('accountsChanged', handleAccountsChanged);\r\n      window.ethereum.on('chainChanged', handleChainChanged);\r\n      \r\n      isInitialized.current = true;\r\n\r\n      // Cleanup function\r\n      return () => {\r\n        console.log('ğŸ§¹ Cleaning up event listeners...');\r\n        if (window.ethereum) {\r\n          window.ethereum.removeListener('accountsChanged', handleAccountsChanged);\r\n          window.ethereum.removeListener('chainChanged', handleChainChanged);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  const showMessage = (message, type = 'error') => {\r\n    if (type === 'error') {\r\n      setError(message);\r\n      setTimeout(() => setError(''), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(''), 5000);\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      if (!window.ethereum) {\r\n        throw new Error('Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!');\r\n      }\r\n\r\n      // YÃªu cáº§u káº¿t ná»‘i vÃ­\r\n      const accounts = await window.ethereum.request({ \r\n        method: 'eth_requestAccounts' \r\n      });\r\n\r\n      if (accounts.length === 0) {\r\n        throw new Error('KhÃ´ng cÃ³ tÃ i khoáº£n nÃ o Ä‘Æ°á»£c káº¿t ná»‘i');\r\n      }\r\n\r\n      const web3Provider = new ethers.BrowserProvider(window.ethereum);\r\n      const web3Signer = await web3Provider.getSigner();\r\n      const userAddress = await web3Signer.getAddress();\r\n\r\n      setProvider(web3Provider);\r\n      setSigner(web3Signer);\r\n      setAccount(userAddress);\r\n      currentAccountRef.current = userAddress; // Cáº­p nháº­t ref\r\n\r\n      // Khá»Ÿi táº¡o contracts\r\n      await initializeContracts(web3Signer);\r\n\r\n      showMessage(`Káº¿t ná»‘i vÃ­ thÃ nh cÃ´ng! TÃ i khoáº£n: ${userAddress.slice(0, 6)}...${userAddress.slice(-4)}`, 'success');\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i káº¿t ná»‘i vÃ­:', error);\r\n      \r\n      let errorMessage = error.message;\r\n      if (error.code === 4001) {\r\n        errorMessage = 'NgÆ°á»i dÃ¹ng Ä‘Ã£ tá»« chá»‘i káº¿t ná»‘i vÃ­';\r\n      }\r\n      \r\n      showMessage(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const disconnectWallet = async () => {\r\n    try {\r\n      // Trong MetaMask, chÃºng ta khÃ´ng thá»ƒ thá»±c sá»± \"disconnect\" programmatically\r\n      // NhÆ°ng cÃ³ thá»ƒ reset state\r\n      setAccount('');\r\n      currentAccountRef.current = '';\r\n      setProvider(null);\r\n      setSigner(null);\r\n      setArtTokenContract(null);\r\n      setAuctionContract(null);\r\n      setNfts([]);\r\n      setAuctions([]);\r\n      \r\n      showMessage('ÄÃ£ ngáº¯t káº¿t ná»‘i vÃ­', 'success');\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i khi ngáº¯t káº¿t ná»‘i:', error);\r\n    }\r\n  };\r\n\r\n  const fetchNFTs = async () => {\r\n    try {\r\n      console.log('ğŸ“¡ Fetching NFTs...');\r\n      const response = await fetch(`${API_BASE}/nfts`);\r\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch NFTs');\r\n      const data = await response.json();\r\n      setNfts(data);\r\n      console.log(`âœ… Loaded ${data.length} NFTs`);\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº£i NFTs:', error);\r\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch NFTs');\r\n    }\r\n  };\r\n\r\n  const fetchActiveAuctions = async () => {\r\n    try {\r\n      console.log('ğŸ“¡ Fetching active auctions...');\r\n      const response = await fetch(`${API_BASE}/active-auctions`);\r\n      if (!response.ok) throw new Error('KhÃ´ng thá»ƒ láº¥y danh sÃ¡ch Ä‘áº¥u giÃ¡');\r\n      const data = await response.json();\r\n      setAuctions(data);\r\n      console.log(`âœ… Loaded ${data.length} active auctions`);\r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº£i Ä‘áº¥u giÃ¡:', error);\r\n      showMessage('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch Ä‘áº¥u giÃ¡');\r\n    }\r\n  };\r\n\r\n  const createNFT = async (e) => {\r\n    e.preventDefault();\r\n    if (!nftForm.name || !nftForm.image) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      console.log('ğŸ”„ Báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº¡o NFT...');\r\n\r\n      // Upload artwork to backend\r\n      const formData = new FormData();\r\n      formData.append('name', nftForm.name);\r\n      formData.append('description', nftForm.description || '');\r\n      formData.append('artist', 'Digital Artist');\r\n      formData.append('artistAddress', account);\r\n      formData.append('image', nftForm.image);\r\n\r\n      console.log('ğŸ“¤ Äang upload artwork...');\r\n      \r\n      const uploadResponse = await fetch(`${API_BASE}/upload-artwork`, {\r\n        method: 'POST',\r\n        body: formData\r\n      });\r\n\r\n      if (!uploadResponse.ok) {\r\n        throw new Error(`Upload tháº¥t báº¡i vá»›i status: ${uploadResponse.status}`);\r\n      }\r\n\r\n      const uploadData = await uploadResponse.json();\r\n      \r\n      if (!uploadData.success) {\r\n        throw new Error(uploadData.error || 'Upload khÃ´ng thÃ nh cÃ´ng');\r\n      }\r\n\r\n      console.log('âœ… Upload thÃ nh cÃ´ng, Ä‘ang mint NFT...');\r\n\r\n      // Mint NFT on blockchain\r\n      const tx = await artTokenContract.safeMint(account);\r\n      console.log('â›“ï¸ Transaction sent:', tx.hash);\r\n      \r\n      const receipt = await tx.wait();\r\n      console.log('âœ… Transaction confirmed');\r\n\r\n      // Get token ID tá»« event\r\n      let tokenId = '0';\r\n      const transferInterface = new ethers.Interface([\r\n        'event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)'\r\n      ]);\r\n      \r\n      for (const log of receipt.logs) {\r\n        try {\r\n          const parsedLog = transferInterface.parseLog(log);\r\n          if (parsedLog && parsedLog.name === 'Transfer') {\r\n            tokenId = parsedLog.args.tokenId.toString();\r\n            break;\r\n          }\r\n        } catch (e) {\r\n          // Bá» qua log khÃ´ng pháº£i Transfer event\r\n        }\r\n      }\r\n\r\n      console.log('ğŸ¯ Token ID:', tokenId);\r\n\r\n      // Save metadata to backend\r\n      const saveResponse = await fetch(`${API_BASE}/nft-metadata`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          tokenId,\r\n          ...uploadData.metadata,\r\n          imageIpfsHash: uploadData.imageIpfsHash,\r\n          metadataIpfsHash: uploadData.metadataIpfsHash\r\n        })\r\n      });\r\n\r\n      if (!saveResponse.ok) {\r\n        throw new Error('LÆ°u metadata tháº¥t báº¡i');\r\n      }\r\n\r\n      console.log('âœ… Metadata saved');\r\n\r\n      showMessage('Táº¡o NFT thÃ nh cÃ´ng!', 'success');\r\n      setNftForm({ name: '', description: '', image: null });\r\n      \r\n      // Reset file input\r\n      const fileInput = document.querySelector('input[type=\"file\"]');\r\n      if (fileInput) fileInput.value = '';\r\n      \r\n      fetchNFTs();\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Lá»—i táº¡o NFT:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createAuction = async (e) => {\r\n    e.preventDefault();\r\n    if (!auctionForm.tokenId || !auctionForm.startPrice || !auctionForm.duration) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const tx = await auctionContract.createAuction(\r\n        auctionForm.tokenId,\r\n        ethers.parseEther(auctionForm.startPrice),\r\n        auctionForm.duration\r\n      );\r\n      await tx.wait();\r\n      \r\n      showMessage('Táº¡o Ä‘áº¥u giÃ¡ thÃ nh cÃ´ng!', 'success');\r\n      setAuctionForm({ tokenId: '', startPrice: '', duration: '' });\r\n      fetchActiveAuctions();\r\n    } catch (error) {\r\n      console.error('Lá»—i táº¡o Ä‘áº¥u giÃ¡:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const placeBid = async (e) => {\r\n    e.preventDefault();\r\n    if (!bidForm.auctionId || !bidForm.amount) {\r\n      showMessage('Vui lÃ²ng Ä‘iá»n táº¥t cáº£ cÃ¡c trÆ°á»ng báº¯t buá»™c');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const tx = await auctionContract.placeBid(bidForm.auctionId, {\r\n        value: ethers.parseEther(bidForm.amount)\r\n      });\r\n      await tx.wait();\r\n      \r\n      showMessage('Ra giÃ¡ thÃ nh cÃ´ng!', 'success');\r\n      setBidForm({ auctionId: '', amount: '' });\r\n      fetchActiveAuctions();\r\n    } catch (error) {\r\n      console.error('Lá»—i ra giÃ¡:', error);\r\n      showMessage(error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatTimeRemaining = (endTime) => {\r\n    const now = new Date();\r\n    const end = new Date(endTime);\r\n    const diff = end - now;\r\n    \r\n    if (diff <= 0) return 'ÄÃ£ káº¿t thÃºc';\r\n    \r\n    const hours = Math.floor(diff / (1000 * 60 * 60));\r\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\r\n    \r\n    return `${hours}giá» ${minutes}phÃºt`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"app-header\">\r\n        <h1>ğŸ¨ Ná»n táº£ng Ä‘áº¥u giÃ¡ nghá»‡ thuáº­t sá»‘</h1>\r\n        {!account ? (\r\n          <button \r\n            onClick={connectWallet} \r\n            disabled={loading}\r\n            className=\"connect-btn\"\r\n          >\r\n            {loading ? 'Äang káº¿t ná»‘i...' : 'Káº¿t ná»‘i MetaMask'}\r\n          </button>\r\n        ) : (\r\n          <div className=\"user-info\">\r\n            <div className=\"account-display\">\r\n              <span className=\"account-address\">\r\n                TÃ i khoáº£n: {account.slice(0, 6)}...{account.slice(-4)}\r\n              </span>\r\n              <button \r\n                onClick={disconnectWallet}\r\n                className=\"disconnect-btn\"\r\n                title=\"Ngáº¯t káº¿t ná»‘i\"\r\n              >\r\n                âœ•\r\n              </button>\r\n            </div>\r\n            <div className=\"account-hint\">\r\n              ğŸ’¡ Thá»­ Ä‘á»•i tÃ i khoáº£n trong MetaMask Ä‘á»ƒ kiá»ƒm tra tÃ­nh nÄƒng tá»± Ä‘á»™ng chuyá»ƒn\r\n            </div>\r\n          </div>\r\n        )}\r\n      </header>\r\n\r\n      {/* Messages */}\r\n      {error && <div className=\"message error\">{error}</div>}\r\n      {success && <div className=\"message success\">{success}</div>}\r\n\r\n      {account && (\r\n        <div className=\"main-content\">\r\n          {/* Navigation Tabs */}\r\n          <nav className=\"tabs\">\r\n            <button \r\n              className={activeTab === 'gallery' ? 'active' : ''}\r\n              onClick={() => setActiveTab('gallery')}\r\n            >\r\n              ThÆ° viá»‡n nghá»‡ thuáº­t\r\n            </button>\r\n            <button \r\n              className={activeTab === 'create' ? 'active' : ''}\r\n              onClick={() => setActiveTab('create')}\r\n            >\r\n              Táº¡o NFT\r\n            </button>\r\n            <button \r\n              className={activeTab === 'auctions' ? 'active' : ''}\r\n              onClick={() => setActiveTab('auctions')}\r\n            >\r\n              Äáº¥u giÃ¡ Ä‘ang diá»…n ra\r\n            </button>\r\n            <button \r\n              className={activeTab === 'bid' ? 'active' : ''}\r\n              onClick={() => setActiveTab('bid')}\r\n            >\r\n              Ra giÃ¡\r\n            </button>\r\n          </nav>\r\n\r\n          {/* Create NFT Section */}\r\n          {activeTab === 'create' && (\r\n            <section className=\"section\">\r\n              <h2>Táº¡o tÃ¡c pháº©m má»›i</h2>\r\n              <form onSubmit={createNFT} className=\"form\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"TÃªn tÃ¡c pháº©m *\"\r\n                  value={nftForm.name}\r\n                  onChange={(e) => setNftForm({...nftForm, name: e.target.value})}\r\n                  required\r\n                />\r\n                <textarea\r\n                  placeholder=\"MÃ´ táº£\"\r\n                  value={nftForm.description}\r\n                  onChange={(e) => setNftForm({...nftForm, description: e.target.value})}\r\n                  rows=\"3\"\r\n                />\r\n                <div className=\"file-upload\">\r\n                  <label>áº¢nh tÃ¡c pháº©m *</label>\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => setNftForm({...nftForm, image: e.target.files[0]})}\r\n                    required\r\n                  />\r\n                </div>\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang táº¡o NFT...' : 'Táº¡o NFT'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* Create Auction Section */}\r\n          {activeTab === 'create' && (\r\n            <section className=\"section\">\r\n              <h2>Táº¡o Ä‘áº¥u giÃ¡</h2>\r\n              <form onSubmit={createAuction} className=\"form\">\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Token ID *\"\r\n                  value={auctionForm.tokenId}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, tokenId: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"GiÃ¡ khá»Ÿi Ä‘iá»ƒm (ETH) *\"\r\n                  value={auctionForm.startPrice}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, startPrice: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Thá»i lÆ°á»£ng (phÃºt) *\"\r\n                  value={auctionForm.duration}\r\n                  onChange={(e) => setAuctionForm({...auctionForm, duration: e.target.value})}\r\n                  required\r\n                />\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang táº¡o Ä‘áº¥u giÃ¡...' : 'Táº¡o Ä‘áº¥u giÃ¡'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* Place Bid Section */}\r\n          {activeTab === 'bid' && (\r\n            <section className=\"section\">\r\n              <h2>Ra giÃ¡</h2>\r\n              <form onSubmit={placeBid} className=\"form\">\r\n                <input\r\n                  type=\"number\"\r\n                  placeholder=\"Auction ID *\"\r\n                  value={bidForm.auctionId}\r\n                  onChange={(e) => setBidForm({...bidForm, auctionId: e.target.value})}\r\n                  required\r\n                />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Sá»‘ tiá»n Ä‘áº·t (ETH) *\"\r\n                  value={bidForm.amount}\r\n                  onChange={(e) => setBidForm({...bidForm, amount: e.target.value})}\r\n                  required\r\n                />\r\n                <button type=\"submit\" disabled={loading} className=\"submit-btn\">\r\n                  {loading ? 'Äang ra giÃ¡...' : 'Ra giÃ¡'}\r\n                </button>\r\n              </form>\r\n            </section>\r\n          )}\r\n\r\n          {/* NFTs Gallery */}\r\n          {activeTab === 'gallery' && (\r\n            <section className=\"section\">\r\n              <h2>ThÆ° viá»‡n nghá»‡ thuáº­t ({nfts.length} má»¥c)</h2>\r\n              {nfts.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <p>ChÆ°a cÃ³ tÃ¡c pháº©m nghá»‡ thuáº­t nÃ o. HÃ£y táº¡o NFT Ä‘áº§u tiÃªn cá»§a báº¡n!</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"nft-grid\">\r\n                  {nfts.map(nft => (\r\n                    <div key={nft._id} className=\"nft-card\">\r\n                      <div className=\"nft-image\">\r\n                        <img \r\n                          src={nft.image} \r\n                          alt={nft.name}\r\n                          onError={(e) => {\r\n                            e.target.src = 'https://via.placeholder.com/300x300?text=Artwork';\r\n                          }}\r\n                        />\r\n                      </div>\r\n                      <div className=\"nft-info\">\r\n                        <h3>{nft.name}</h3>\r\n                        <p className=\"description\">{nft.description}</p>\r\n                        <div className=\"nft-meta\">\r\n                          <small>Token ID: {nft.tokenId}</small>\r\n                          <small>Nghá»‡ sÄ©: {nft.artist}</small>\r\n                          <small>NgÃ y táº¡o: {new Date(nft.createdAt).toLocaleDateString()}</small>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n\r\n          {/* Active Auctions */}\r\n          {activeTab === 'auctions' && (\r\n            <section className=\"section\">\r\n              <h2>Äáº¥u giÃ¡ Ä‘ang diá»…n ra ({auctions.length})</h2>\r\n              {auctions.length === 0 ? (\r\n                <div className=\"empty-state\">\r\n                  <p>ChÆ°a cÃ³ Ä‘áº¥u giÃ¡ nÃ o Ä‘ang diá»…n ra. HÃ£y táº¡o má»™t Ä‘áº¥u giÃ¡ tá»« NFT cá»§a báº¡n!</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"auctions-grid\">\r\n                  {auctions.map(auction => (\r\n                    <div key={auction._id} className=\"auction-card\">\r\n                      <div className=\"auction-header\">\r\n                        <h3>Äáº¥u giÃ¡ #{auction.auctionId}</h3>\r\n                        <span className={`status ${formatTimeRemaining(auction.endTime) === 'ÄÃ£ káº¿t thÃºc' ? 'ended' : 'active'}`}>\r\n                          {formatTimeRemaining(auction.endTime)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {auction.nftMetadata && (\r\n                        <div className=\"auction-nft\">\r\n                          <img \r\n                            src={auction.nftMetadata.image} \r\n                            alt={auction.nftMetadata.name}\r\n                            onError={(e) => {\r\n                              e.target.src = 'https://via.placeholder.com/200x200?text=Artwork';\r\n                            }}\r\n                          />\r\n                          <div className=\"nft-details\">\r\n                            <h4>{auction.nftMetadata.name}</h4>\r\n                            <p>{auction.nftMetadata.description}</p>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"auction-details\">\r\n                        <div className=\"detail-row\">\r\n                          <span>Token ID:</span>\r\n                          <span>{auction.tokenId}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>NgÆ°á»i bÃ¡n:</span>\r\n                          <span className=\"address\">{auction.seller.slice(0, 6)}...{auction.seller.slice(-4)}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>GiÃ¡ hiá»‡n táº¡i:</span>\r\n                          <span className=\"bid-amount\">\r\n                            {ethers.formatEther(auction.highestBid || '0')} ETH\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>Sá»‘ lÆ°á»£t ra giÃ¡:</span>\r\n                          <span>{auction.bids?.length || 0}</span>\r\n                        </div>\r\n                        <div className=\"detail-row\">\r\n                          <span>Káº¿t thÃºc:</span>\r\n                          <span>{new Date(auction.endTime).toLocaleString('vi-VN')}</span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {auction.highestBidder && auction.highestBidder !== '0x0000000000000000000000000000000000000000' && (\r\n                        <div className=\"current-bidder\">\r\n                          NgÆ°á»i ra giÃ¡ cao nháº¥t: {auction.highestBidder.slice(0, 6)}...{auction.highestBidder.slice(-4)}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </section>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {loading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"loading-spinner\">Äang táº£i...</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}