{"ast":null,"code":"import { ethers } from 'ethers';\n\n// Safe JSON stringify cho blockchain calls\nexport const safeCall = async (contract, method, params = []) => {\n  try {\n    console.log(`üîó Calling ${method} with params:`, params);\n\n    // Validate parameters\n    const validParams = params.map(param => {\n      if (typeof param === 'object') {\n        return JSON.parse(JSON.stringify(param)); // Ensure serializable\n      }\n      return param;\n    });\n    const result = await contract[method](...validParams);\n    console.log(`‚úÖ ${method} call successful:`, result);\n    return result;\n  } catch (error) {\n    console.error(`‚ùå ${method} call failed:`, error);\n    throw error;\n  }\n};\n\n// Ki·ªÉm tra k·∫øt n·ªëi blockchain\nexport const checkBlockchainConnection = async provider => {\n  try {\n    const network = await provider.getNetwork();\n    const blockNumber = await provider.getBlockNumber();\n    console.log('üì° Blockchain connection:', {\n      chainId: network.chainId,\n      name: network.name,\n      blockNumber: blockNumber\n    });\n    return true;\n  } catch (error) {\n    console.error('‚ùå Blockchain connection failed:', error);\n    return false;\n  }\n};","map":{"version":3,"names":["ethers","safeCall","contract","method","params","console","log","validParams","map","param","JSON","parse","stringify","result","error","checkBlockchainConnection","provider","network","getNetwork","blockNumber","getBlockNumber","chainId","name"],"sources":["D:/2/Z_Blockchain/frontend/src/utils/blockchain.js"],"sourcesContent":["import { ethers } from 'ethers';\r\n\r\n// Safe JSON stringify cho blockchain calls\r\nexport const safeCall = async (contract, method, params = []) => {\r\n  try {\r\n    console.log(`üîó Calling ${method} with params:`, params);\r\n    \r\n    // Validate parameters\r\n    const validParams = params.map(param => {\r\n      if (typeof param === 'object') {\r\n        return JSON.parse(JSON.stringify(param)); // Ensure serializable\r\n      }\r\n      return param;\r\n    });\r\n\r\n    const result = await contract[method](...validParams);\r\n    console.log(`‚úÖ ${method} call successful:`, result);\r\n    return result;\r\n  } catch (error) {\r\n    console.error(`‚ùå ${method} call failed:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Ki·ªÉm tra k·∫øt n·ªëi blockchain\r\nexport const checkBlockchainConnection = async (provider) => {\r\n  try {\r\n    const network = await provider.getNetwork();\r\n    const blockNumber = await provider.getBlockNumber();\r\n    console.log('üì° Blockchain connection:', {\r\n      chainId: network.chainId,\r\n      name: network.name,\r\n      blockNumber: blockNumber\r\n    });\r\n    return true;\r\n  } catch (error) {\r\n    console.error('‚ùå Blockchain connection failed:', error);\r\n    return false;\r\n  }\r\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;;AAE/B;AACA,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,GAAG,EAAE,KAAK;EAC/D,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,cAAcH,MAAM,eAAe,EAAEC,MAAM,CAAC;;IAExD;IACA,MAAMG,WAAW,GAAGH,MAAM,CAACI,GAAG,CAACC,KAAK,IAAI;MACtC,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;QAC7B,OAAOC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACH,KAAK,CAAC,CAAC,CAAC,CAAC;MAC5C;MACA,OAAOA,KAAK;IACd,CAAC,CAAC;IAEF,MAAMI,MAAM,GAAG,MAAMX,QAAQ,CAACC,MAAM,CAAC,CAAC,GAAGI,WAAW,CAAC;IACrDF,OAAO,CAACC,GAAG,CAAC,KAAKH,MAAM,mBAAmB,EAAEU,MAAM,CAAC;IACnD,OAAOA,MAAM;EACf,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdT,OAAO,CAACS,KAAK,CAAC,KAAKX,MAAM,eAAe,EAAEW,KAAK,CAAC;IAChD,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,yBAAyB,GAAG,MAAOC,QAAQ,IAAK;EAC3D,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMD,QAAQ,CAACE,UAAU,CAAC,CAAC;IAC3C,MAAMC,WAAW,GAAG,MAAMH,QAAQ,CAACI,cAAc,CAAC,CAAC;IACnDf,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;MACvCe,OAAO,EAAEJ,OAAO,CAACI,OAAO;MACxBC,IAAI,EAAEL,OAAO,CAACK,IAAI;MAClBH,WAAW,EAAEA;IACf,CAAC,CAAC;IACF,OAAO,IAAI;EACb,CAAC,CAAC,OAAOL,KAAK,EAAE;IACdT,OAAO,CAACS,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;IACvD,OAAO,KAAK;EACd;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}